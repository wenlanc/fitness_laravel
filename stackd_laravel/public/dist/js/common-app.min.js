/*!
 lw-dating by LivelyWorks - http://livelyworks.net
 version: 2.x
 --------------------------------------------------------------------- 
 Build Timestamp: 1628688483
 Build Date: Wed Aug 11 2021 18:58:03 GMT+0530 (India Standard Time)
--------------------------------------------------------------------- */
var dbits,
    canary = 0xdeadbeefcafe,
    j_lm = 15715070 == (16777215 & canary);
function BigInteger(e, t, n) {
    null != e && ("number" == typeof e ? this.fromNumber(e, t, n) : null == t && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t));
}
function nbi() {
    return new BigInteger(null);
}
function am1(e, t, n, r, i, o) {
    for (; 0 <= --o; ) {
        var s = t * this[e++] + n[r] + i;
        (i = Math.floor(s / 67108864)), (n[r++] = 67108863 & s);
    }
    return i;
}
function am2(e, t, n, r, i, o) {
    for (var s = 32767 & t, a = t >> 15; 0 <= --o; ) {
        var l = 32767 & this[e],
            c = this[e++] >> 15,
            p = a * l + c * s;
        (i = ((l = s * l + ((32767 & p) << 15) + n[r] + (1073741823 & i)) >>> 30) + (p >>> 15) + a * c + (i >>> 30)), (n[r++] = 1073741823 & l);
    }
    return i;
}
function am3(e, t, n, r, i, o) {
    for (var s = 16383 & t, a = t >> 14; 0 <= --o; ) {
        var l = 16383 & this[e],
            c = this[e++] >> 14,
            p = a * l + c * s;
        (i = ((l = s * l + ((16383 & p) << 14) + n[r] + i) >> 28) + (p >> 14) + a * c), (n[r++] = 268435455 & l);
    }
    return i;
}
(dbits = j_lm && "Microsoft Internet Explorer" == navigator.appName ? ((BigInteger.prototype.am = am2), 30) : j_lm && "Netscape" != navigator.appName ? ((BigInteger.prototype.am = am1), 26) : ((BigInteger.prototype.am = am3), 28)),
    (BigInteger.prototype.DB = dbits),
    (BigInteger.prototype.DM = (1 << dbits) - 1),
    (BigInteger.prototype.DV = 1 << dbits);
var BI_FP = 52;
(BigInteger.prototype.FV = Math.pow(2, BI_FP)), (BigInteger.prototype.F1 = BI_FP - dbits), (BigInteger.prototype.F2 = 2 * dbits - BI_FP);
for (var BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz", BI_RC = new Array(), rr, vv, rr = "0".charCodeAt(0), vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;
for (rr = "a".charCodeAt(0), vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;
for (rr = "A".charCodeAt(0), vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;
function int2char(e) {
    return BI_RM.charAt(e);
}
function intAt(e, t) {
    t = BI_RC[e.charCodeAt(t)];
    return null == t ? -1 : t;
}
function bnpCopyTo(e) {
    for (var t = this.t - 1; 0 <= t; --t) e[t] = this[t];
    (e.t = this.t), (e.s = this.s);
}
function bnpFromInt(e) {
    (this.t = 1), (this.s = e < 0 ? -1 : 0), 0 < e ? (this[0] = e) : e < -1 ? (this[0] = e + DV) : (this.t = 0);
}
function nbv(e) {
    var t = nbi();
    return t.fromInt(e), t;
}
function bnpFromString(e, t) {
    var n;
    if (16 == t) n = 4;
    else if (8 == t) n = 3;
    else if (256 == t) n = 8;
    else if (2 == t) n = 1;
    else if (32 == t) n = 5;
    else {
        if (4 != t) return void this.fromRadix(e, t);
        n = 2;
    }
    (this.t = 0), (this.s = 0);
    for (var r = e.length, i = !1, o = 0; 0 <= --r; ) {
        var s = 8 == n ? 255 & e[r] : intAt(e, r);
        s < 0
            ? "-" == e.charAt(r) && (i = !0)
            : ((i = !1),
              0 == o ? (this[this.t++] = s) : o + n > this.DB ? ((this[this.t - 1] |= (s & ((1 << (this.DB - o)) - 1)) << o), (this[this.t++] = s >> (this.DB - o))) : (this[this.t - 1] |= s << o),
              (o += n) >= this.DB && (o -= this.DB));
    }
    8 == n && 0 != (128 & e[0]) && ((this.s = -1), 0 < o && (this[this.t - 1] |= ((1 << (this.DB - o)) - 1) << o)), this.clamp(), i && BigInteger.ZERO.subTo(this, this);
}
function bnpClamp() {
    for (var e = this.s & this.DM; 0 < this.t && this[this.t - 1] == e; ) --this.t;
}
function bnToString(e) {
    if (this.s < 0) return "-" + this.negate().toString(e);
    var t;
    if (16 == e) t = 4;
    else if (8 == e) t = 3;
    else if (2 == e) t = 1;
    else if (32 == e) t = 5;
    else if (64 == e) t = 6;
    else {
        if (4 != e) return this.toRadix(e);
        t = 2;
    }
    var n,
        r = (1 << t) - 1,
        i = !1,
        o = "",
        s = this.t,
        a = this.DB - ((s * this.DB) % t);
    if (0 < s--)
        for (a < this.DB && 0 < (n = this[s] >> a) && ((i = !0), (o = int2char(n))); 0 <= s; )
            a < t ? ((n = (this[s] & ((1 << a) - 1)) << (t - a)), (n |= this[--s] >> (a += this.DB - t))) : ((n = (this[s] >> (a -= t)) & r), a <= 0 && ((a += this.DB), --s)), (i = 0 < n ? !0 : i) && (o += int2char(n));
    return i ? o : "0";
}
function bnNegate() {
    var e = nbi();
    return BigInteger.ZERO.subTo(this, e), e;
}
function bnAbs() {
    return this.s < 0 ? this.negate() : this;
}
function bnCompareTo(e) {
    var t = this.s - e.s;
    if (0 != t) return t;
    var n = this.t;
    if (0 != (t = n - e.t)) return t;
    for (; 0 <= --n; ) if (0 != (t = this[n] - e[n])) return t;
    return 0;
}
function nbits(e) {
    var t,
        n = 1;
    return 0 != (t = e >>> 16) && ((e = t), (n += 16)), 0 != (t = e >> 8) && ((e = t), (n += 8)), 0 != (t = e >> 4) && ((e = t), (n += 4)), 0 != (t = e >> 2) && ((e = t), (n += 2)), 0 != (t = e >> 1) && ((e = t), (n += 1)), n;
}
function bnBitLength() {
    return this.t <= 0 ? 0 : this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));
}
function bnpDLShiftTo(e, t) {
    for (var n = this.t - 1; 0 <= n; --n) t[n + e] = this[n];
    for (n = e - 1; 0 <= n; --n) t[n] = 0;
    (t.t = this.t + e), (t.s = this.s);
}
function bnpDRShiftTo(e, t) {
    for (var n = e; n < this.t; ++n) t[n - e] = this[n];
    (t.t = Math.max(this.t - e, 0)), (t.s = this.s);
}
function bnpLShiftTo(e, t) {
    for (var n = e % this.DB, r = this.DB - n, i = (1 << r) - 1, o = Math.floor(e / this.DB), s = (this.s << n) & this.DM, a = this.t - 1; 0 <= a; --a) (t[a + o + 1] = (this[a] >> r) | s), (s = (this[a] & i) << n);
    for (a = o - 1; 0 <= a; --a) t[a] = 0;
    (t[o] = s), (t.t = this.t + o + 1), (t.s = this.s), t.clamp();
}
function bnpRShiftTo(e, t) {
    t.s = this.s;
    var n = Math.floor(e / this.DB);
    if (n >= this.t) t.t = 0;
    else {
        var r = e % this.DB,
            i = this.DB - r,
            o = (1 << r) - 1;
        t[0] = this[n] >> r;
        for (var s = n + 1; s < this.t; ++s) (t[s - n - 1] |= (this[s] & o) << i), (t[s - n] = this[s] >> r);
        0 < r && (t[this.t - n - 1] |= (this.s & o) << i), (t.t = this.t - n), t.clamp();
    }
}
function bnpSubTo(e, t) {
    for (var n = 0, r = 0, i = Math.min(e.t, this.t); n < i; ) (r += this[n] - e[n]), (t[n++] = r & this.DM), (r >>= this.DB);
    if (e.t < this.t) {
        for (r -= e.s; n < this.t; ) (r += this[n]), (t[n++] = r & this.DM), (r >>= this.DB);
        r += this.s;
    } else {
        for (r += this.s; n < e.t; ) (r -= e[n]), (t[n++] = r & this.DM), (r >>= this.DB);
        r -= e.s;
    }
    (t.s = r < 0 ? -1 : 0), r < -1 ? (t[n++] = this.DV + r) : 0 < r && (t[n++] = r), (t.t = n), t.clamp();
}
function bnpMultiplyTo(e, t) {
    var n = this.abs(),
        r = e.abs(),
        i = n.t;
    for (t.t = i + r.t; 0 <= --i; ) t[i] = 0;
    for (i = 0; i < r.t; ++i) t[i + n.t] = n.am(0, r[i], t, i, 0, n.t);
    (t.s = 0), t.clamp(), this.s != e.s && BigInteger.ZERO.subTo(t, t);
}
function bnpSquareTo(e) {
    for (var t = this.abs(), n = (e.t = 2 * t.t); 0 <= --n; ) e[n] = 0;
    for (n = 0; n < t.t - 1; ++n) {
        var r = t.am(n, t[n], e, 2 * n, 0, 1);
        (e[n + t.t] += t.am(n + 1, 2 * t[n], e, 2 * n + 1, r, t.t - n - 1)) >= t.DV && ((e[n + t.t] -= t.DV), (e[n + t.t + 1] = 1));
    }
    0 < e.t && (e[e.t - 1] += t.am(n, t[n], e, 2 * n, 0, 1)), (e.s = 0), e.clamp();
}
function bnpDivRemTo(e, t, n) {
    var r = e.abs();
    if (!(r.t <= 0)) {
        var i = this.abs();
        if (i.t < r.t) return null != t && t.fromInt(0), void (null != n && this.copyTo(n));
        null == n && (n = nbi());
        var o = nbi(),
            s = this.s,
            a = e.s,
            e = this.DB - nbits(r[r.t - 1]);
        0 < e ? (r.lShiftTo(e, o), i.lShiftTo(e, n)) : (r.copyTo(o), i.copyTo(n));
        var l = o.t,
            c = o[l - 1];
        if (0 != c) {
            var i = c * (1 << this.F1) + (1 < l ? o[l - 2] >> this.F2 : 0),
                p = this.FV / i,
                u = (1 << this.F1) / i,
                d = 1 << this.F2,
                h = n.t,
                g = h - l,
                f = null == t ? nbi() : t;
            for (o.dlShiftTo(g, f), 0 <= n.compareTo(f) && ((n[n.t++] = 1), n.subTo(f, n)), BigInteger.ONE.dlShiftTo(l, f), f.subTo(o, o); o.t < l; ) o[o.t++] = 0;
            for (; 0 <= --g; ) {
                var m = n[--h] == c ? this.DM : Math.floor(n[h] * p + (n[h - 1] + d) * u);
                if ((n[h] += o.am(0, m, n, g, 0, l)) < m) for (o.dlShiftTo(g, f), n.subTo(f, n); n[h] < --m; ) n.subTo(f, n);
            }
            null != t && (n.drShiftTo(l, t), s != a && BigInteger.ZERO.subTo(t, t)), (n.t = l), n.clamp(), 0 < e && n.rShiftTo(e, n), s < 0 && BigInteger.ZERO.subTo(n, n);
        }
    }
}
function bnMod(e) {
    var t = nbi();
    return this.abs().divRemTo(e, null, t), this.s < 0 && 0 < t.compareTo(BigInteger.ZERO) && e.subTo(t, t), t;
}
function Classic(e) {
    this.m = e;
}
function cConvert(e) {
    return e.s < 0 || 0 <= e.compareTo(this.m) ? e.mod(this.m) : e;
}
function cRevert(e) {
    return e;
}
function cReduce(e) {
    e.divRemTo(this.m, null, e);
}
function cMulTo(e, t, n) {
    e.multiplyTo(t, n), this.reduce(n);
}
function cSqrTo(e, t) {
    e.squareTo(t), this.reduce(t);
}
function bnpInvDigit() {
    if (this.t < 1) return 0;
    var e = this[0];
    if (0 == (1 & e)) return 0;
    var t = 3 & e;
    return 0 < (t = ((t = ((t = ((t = (t * (2 - (15 & e) * t)) & 15) * (2 - (255 & e) * t)) & 255) * (2 - (((65535 & e) * t) & 65535))) & 65535) * (2 - ((e * t) % this.DV))) % this.DV) ? this.DV - t : -t;
}
function Montgomery(e) {
    (this.m = e), (this.mp = e.invDigit()), (this.mpl = 32767 & this.mp), (this.mph = this.mp >> 15), (this.um = (1 << (e.DB - 15)) - 1), (this.mt2 = 2 * e.t);
}
function montConvert(e) {
    var t = nbi();
    return e.abs().dlShiftTo(this.m.t, t), t.divRemTo(this.m, null, t), e.s < 0 && 0 < t.compareTo(BigInteger.ZERO) && this.m.subTo(t, t), t;
}
function montRevert(e) {
    var t = nbi();
    return e.copyTo(t), this.reduce(t), t;
}
function montReduce(e) {
    for (; e.t <= this.mt2; ) e[e.t++] = 0;
    for (var t = 0; t < this.m.t; ++t) {
        var n = 32767 & e[t],
            r = (n * this.mpl + (((n * this.mph + (e[t] >> 15) * this.mpl) & this.um) << 15)) & e.DM;
        for (e[(n = t + this.m.t)] += this.m.am(0, r, e, t, 0, this.m.t); e[n] >= e.DV; ) (e[n] -= e.DV), e[++n]++;
    }
    e.clamp(), e.drShiftTo(this.m.t, e), 0 <= e.compareTo(this.m) && e.subTo(this.m, e);
}
function montSqrTo(e, t) {
    e.squareTo(t), this.reduce(t);
}
function montMulTo(e, t, n) {
    e.multiplyTo(t, n), this.reduce(n);
}
function bnpIsEven() {
    return 0 == (0 < this.t ? 1 & this[0] : this.s);
}
function bnpExp(e, t) {
    if (4294967295 < e || e < 1) return BigInteger.ONE;
    var n,
        r = nbi(),
        i = nbi(),
        o = t.convert(this),
        s = nbits(e) - 1;
    for (o.copyTo(r); 0 <= --s; ) t.sqrTo(r, i), 0 < (e & (1 << s)) ? t.mulTo(i, o, r) : ((n = r), (r = i), (i = n));
    return t.revert(r);
}
function bnModPowInt(e, t) {
    t = new (e < 256 || t.isEven() ? Classic : Montgomery)(t);
    return this.exp(e, t);
}
function bnClone() {
    var e = nbi();
    return this.copyTo(e), e;
}
function bnIntValue() {
    if (this.s < 0) {
        if (1 == this.t) return this[0] - this.DV;
        if (0 == this.t) return -1;
    } else {
        if (1 == this.t) return this[0];
        if (0 == this.t) return 0;
    }
    return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];
}
function bnByteValue() {
    return 0 == this.t ? this.s : (this[0] << 24) >> 24;
}
function bnShortValue() {
    return 0 == this.t ? this.s : (this[0] << 16) >> 16;
}
function bnpChunkSize(e) {
    return Math.floor((Math.LN2 * this.DB) / Math.log(e));
}
function bnSigNum() {
    return this.s < 0 ? -1 : this.t <= 0 || (1 == this.t && this[0] <= 0) ? 0 : 1;
}
function bnpToRadix(e) {
    if ((null == e && (e = 10), 0 == this.signum() || e < 2 || 36 < e)) return "0";
    var t = this.chunkSize(e),
        n = Math.pow(e, t),
        r = nbv(n),
        i = nbi(),
        o = nbi(),
        s = "";
    for (this.divRemTo(r, i, o); 0 < i.signum(); ) (s = (n + o.intValue()).toString(e).substr(1) + s), i.divRemTo(r, i, o);
    return o.intValue().toString(e) + s;
}
function bnpFromRadix(e, t) {
    this.fromInt(0);
    for (var n = this.chunkSize((t = null == t ? 10 : t)), r = Math.pow(t, n), i = !1, o = 0, s = 0, a = 0; a < e.length; ++a) {
        var l = intAt(e, a);
        l < 0 ? "-" == e.charAt(a) && 0 == this.signum() && (i = !0) : ((s = t * s + l), ++o >= n && (this.dMultiply(r), this.dAddOffset(s, 0), (s = o = 0)));
    }
    0 < o && (this.dMultiply(Math.pow(t, o)), this.dAddOffset(s, 0)), i && BigInteger.ZERO.subTo(this, this);
}
function bnpFromNumber(e, t, n) {
    if ("number" == typeof t)
        if (e < 2) this.fromInt(1);
        else
            for (this.fromNumber(e, n), this.testBit(e - 1) || this.bitwiseTo(BigInteger.ONE.shiftLeft(e - 1), op_or, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(t); )
                this.dAddOffset(2, 0), this.bitLength() > e && this.subTo(BigInteger.ONE.shiftLeft(e - 1), this);
    else {
        var r = new Array(),
            n = 7 & e;
        (r.length = 1 + (e >> 3)), t.nextBytes(r), 0 < n ? (r[0] &= (1 << n) - 1) : (r[0] = 0), this.fromString(r, 256);
    }
}
function bnToByteArray() {
    var e = this.t,
        t = new Array();
    t[0] = this.s;
    var n,
        r = this.DB - ((e * this.DB) % 8),
        i = 0;
    if (0 < e--)
        for (r < this.DB && (n = this[e] >> r) != (this.s & this.DM) >> r && (t[i++] = n | (this.s << (this.DB - r))); 0 <= e; )
            r < 8 ? ((n = (this[e] & ((1 << r) - 1)) << (8 - r)), (n |= this[--e] >> (r += this.DB - 8))) : ((n = (this[e] >> (r -= 8)) & 255), r <= 0 && ((r += this.DB), --e)),
                0 != (128 & n) && (n |= -256),
                0 == i && (128 & this.s) != (128 & n) && ++i,
                (0 < i || n != this.s) && (t[i++] = n);
    return t;
}
function bnEquals(e) {
    return 0 == this.compareTo(e);
}
function bnMin(e) {
    return this.compareTo(e) < 0 ? this : e;
}
function bnMax(e) {
    return 0 < this.compareTo(e) ? this : e;
}
function bnpBitwiseTo(e, t, n) {
    for (var r, i = Math.min(e.t, this.t), o = 0; o < i; ++o) n[o] = t(this[o], e[o]);
    if (e.t < this.t) {
        for (r = e.s & this.DM, o = i; o < this.t; ++o) n[o] = t(this[o], r);
        n.t = this.t;
    } else {
        for (r = this.s & this.DM, o = i; o < e.t; ++o) n[o] = t(r, e[o]);
        n.t = e.t;
    }
    (n.s = t(this.s, e.s)), n.clamp();
}
function op_and(e, t) {
    return e & t;
}
function bnAnd(e) {
    var t = nbi();
    return this.bitwiseTo(e, op_and, t), t;
}
function op_or(e, t) {
    return e | t;
}
function bnOr(e) {
    var t = nbi();
    return this.bitwiseTo(e, op_or, t), t;
}
function op_xor(e, t) {
    return e ^ t;
}
function bnXor(e) {
    var t = nbi();
    return this.bitwiseTo(e, op_xor, t), t;
}
function op_andnot(e, t) {
    return e & ~t;
}
function bnAndNot(e) {
    var t = nbi();
    return this.bitwiseTo(e, op_andnot, t), t;
}
function bnNot() {
    for (var e = nbi(), t = 0; t < this.t; ++t) e[t] = this.DM & ~this[t];
    return (e.t = this.t), (e.s = ~this.s), e;
}
function bnShiftLeft(e) {
    var t = nbi();
    return e < 0 ? this.rShiftTo(-e, t) : this.lShiftTo(e, t), t;
}
function bnShiftRight(e) {
    var t = nbi();
    return e < 0 ? this.lShiftTo(-e, t) : this.rShiftTo(e, t), t;
}
function lbit(e) {
    if (0 == e) return -1;
    var t = 0;
    return 0 == (65535 & e) && ((e >>= 16), (t += 16)), 0 == (255 & e) && ((e >>= 8), (t += 8)), 0 == (15 & e) && ((e >>= 4), (t += 4)), 0 == (3 & e) && ((e >>= 2), (t += 2)), 0 == (1 & e) && ++t, t;
}
function bnGetLowestSetBit() {
    for (var e = 0; e < this.t; ++e) if (0 != this[e]) return e * this.DB + lbit(this[e]);
    return this.s < 0 ? this.t * this.DB : -1;
}
function cbit(e) {
    for (var t = 0; 0 != e; ) (e &= e - 1), ++t;
    return t;
}
function bnBitCount() {
    for (var e = 0, t = this.s & this.DM, n = 0; n < this.t; ++n) e += cbit(this[n] ^ t);
    return e;
}
function bnTestBit(e) {
    var t = Math.floor(e / this.DB);
    return t >= this.t ? 0 != this.s : 0 != (this[t] & (1 << e % this.DB));
}
function bnpChangeBit(e, t) {
    e = BigInteger.ONE.shiftLeft(e);
    return this.bitwiseTo(e, t, e), e;
}
function bnSetBit(e) {
    return this.changeBit(e, op_or);
}
function bnClearBit(e) {
    return this.changeBit(e, op_andnot);
}
function bnFlipBit(e) {
    return this.changeBit(e, op_xor);
}
function bnpAddTo(e, t) {
    for (var n = 0, r = 0, i = Math.min(e.t, this.t); n < i; ) (r += this[n] + e[n]), (t[n++] = r & this.DM), (r >>= this.DB);
    if (e.t < this.t) {
        for (r += e.s; n < this.t; ) (r += this[n]), (t[n++] = r & this.DM), (r >>= this.DB);
        r += this.s;
    } else {
        for (r += this.s; n < e.t; ) (r += e[n]), (t[n++] = r & this.DM), (r >>= this.DB);
        r += e.s;
    }
    (t.s = r < 0 ? -1 : 0), 0 < r ? (t[n++] = r) : r < -1 && (t[n++] = this.DV + r), (t.t = n), t.clamp();
}
function bnAdd(e) {
    var t = nbi();
    return this.addTo(e, t), t;
}
function bnSubtract(e) {
    var t = nbi();
    return this.subTo(e, t), t;
}
function bnMultiply(e) {
    var t = nbi();
    return this.multiplyTo(e, t), t;
}
function bnSquare() {
    var e = nbi();
    return this.squareTo(e), e;
}
function bnDivide(e) {
    var t = nbi();
    return this.divRemTo(e, t, null), t;
}
function bnRemainder(e) {
    var t = nbi();
    return this.divRemTo(e, null, t), t;
}
function bnDivideAndRemainder(e) {
    var t = nbi(),
        n = nbi();
    return this.divRemTo(e, t, n), new Array(t, n);
}
function bnpDMultiply(e) {
    (this[this.t] = this.am(0, e - 1, this, 0, 0, this.t)), ++this.t, this.clamp();
}
function bnpDAddOffset(e, t) {
    if (0 != e) {
        for (; this.t <= t; ) this[this.t++] = 0;
        for (this[t] += e; this[t] >= this.DV; ) (this[t] -= this.DV), ++t >= this.t && (this[this.t++] = 0), ++this[t];
    }
}
function NullExp() {}
function nNop(e) {
    return e;
}
function nMulTo(e, t, n) {
    e.multiplyTo(t, n);
}
function nSqrTo(e, t) {
    e.squareTo(t);
}
function bnPow(e) {
    return this.exp(e, new NullExp());
}
function bnpMultiplyLowerTo(e, t, n) {
    var r,
        i = Math.min(this.t + e.t, t);
    for (n.s = 0, n.t = i; 0 < i; ) n[--i] = 0;
    for (r = n.t - this.t; i < r; ++i) n[i + this.t] = this.am(0, e[i], n, i, 0, this.t);
    for (r = Math.min(e.t, t); i < r; ++i) this.am(0, e[i], n, i, 0, t - i);
    n.clamp();
}
function bnpMultiplyUpperTo(e, t, n) {
    var r = (n.t = this.t + e.t - --t);
    for (n.s = 0; 0 <= --r; ) n[r] = 0;
    for (r = Math.max(t - this.t, 0); r < e.t; ++r) n[this.t + r - t] = this.am(t - r, e[r], n, 0, 0, this.t + r - t);
    n.clamp(), n.drShiftTo(1, n);
}
function Barrett(e) {
    (this.r2 = nbi()), (this.q3 = nbi()), BigInteger.ONE.dlShiftTo(2 * e.t, this.r2), (this.mu = this.r2.divide(e)), (this.m = e);
}
function barrettConvert(e) {
    if (e.s < 0 || e.t > 2 * this.m.t) return e.mod(this.m);
    if (e.compareTo(this.m) < 0) return e;
    var t = nbi();
    return e.copyTo(t), this.reduce(t), t;
}
function barrettRevert(e) {
    return e;
}
function barrettReduce(e) {
    for (
        e.drShiftTo(this.m.t - 1, this.r2), e.t > this.m.t + 1 && ((e.t = this.m.t + 1), e.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);
        e.compareTo(this.r2) < 0;

    )
        e.dAddOffset(1, this.m.t + 1);
    for (e.subTo(this.r2, e); 0 <= e.compareTo(this.m); ) e.subTo(this.m, e);
}
function barrettSqrTo(e, t) {
    e.squareTo(t), this.reduce(t);
}
function barrettMulTo(e, t, n) {
    e.multiplyTo(t, n), this.reduce(n);
}
function bnModPow(e, t) {
    var n = e.bitLength(),
        r = nbv(1);
    if (n <= 0) return r;
    var i = n < 18 ? 1 : n < 48 ? 3 : n < 144 ? 4 : n < 768 ? 5 : 6,
        o = new (n < 8 ? Classic : t.isEven() ? Barrett : Montgomery)(t),
        s = new Array(),
        a = 3,
        l = i - 1,
        c = (1 << i) - 1;
    if (((s[1] = o.convert(this)), 1 < i)) {
        var p = nbi();
        for (o.sqrTo(s[1], p); a <= c; ) (s[a] = nbi()), o.mulTo(p, s[a - 2], s[a]), (a += 2);
    }
    for (var u, d, h = e.t - 1, g = !0, f = nbi(), n = nbits(e[h]) - 1; 0 <= h; ) {
        for (l <= n ? (u = (e[h] >> (n - l)) & c) : ((u = (e[h] & ((1 << (n + 1)) - 1)) << (l - n)), 0 < h && (u |= e[h - 1] >> (this.DB + n - l))), a = i; 0 == (1 & u); ) (u >>= 1), --a;
        if (((n -= a) < 0 && ((n += this.DB), --h), g)) s[u].copyTo(r), (g = !1);
        else {
            for (; 1 < a; ) o.sqrTo(r, f), o.sqrTo(f, r), (a -= 2);
            0 < a ? o.sqrTo(r, f) : ((d = r), (r = f), (f = d)), o.mulTo(f, s[u], r);
        }
        for (; 0 <= h && 0 == (e[h] & (1 << n)); ) o.sqrTo(r, f), (d = r), (r = f), (f = d), --n < 0 && ((n = this.DB - 1), --h);
    }
    return o.revert(r);
}
function bnGCD(e) {
    var t = this.s < 0 ? this.negate() : this.clone(),
        n = e.s < 0 ? e.negate() : e.clone();
    t.compareTo(n) < 0 && ((i = t), (t = n), (n = i));
    var r = t.getLowestSetBit(),
        i = n.getLowestSetBit();
    if (i < 0) return t;
    for (0 < (i = r < i ? r : i) && (t.rShiftTo(i, t), n.rShiftTo(i, n)); 0 < t.signum(); )
        0 < (r = t.getLowestSetBit()) && t.rShiftTo(r, t), 0 < (r = n.getLowestSetBit()) && n.rShiftTo(r, n), 0 <= t.compareTo(n) ? (t.subTo(n, t), t.rShiftTo(1, t)) : (n.subTo(t, n), n.rShiftTo(1, n));
    return 0 < i && n.lShiftTo(i, n), n;
}
function bnpModInt(e) {
    if (e <= 0) return 0;
    var t = this.DV % e,
        n = this.s < 0 ? e - 1 : 0;
    if (0 < this.t)
        if (0 == t) n = this[0] % e;
        else for (var r = this.t - 1; 0 <= r; --r) n = (t * n + this[r]) % e;
    return n;
}
function bnModInverse(e) {
    var t = e.isEven();
    if ((this.isEven() && t) || 0 == e.signum()) return BigInteger.ZERO;
    for (var n = e.clone(), r = this.clone(), i = nbv(1), o = nbv(0), s = nbv(0), a = nbv(1); 0 != n.signum(); ) {
        for (; n.isEven(); ) n.rShiftTo(1, n), t ? ((i.isEven() && o.isEven()) || (i.addTo(this, i), o.subTo(e, o)), i.rShiftTo(1, i)) : o.isEven() || o.subTo(e, o), o.rShiftTo(1, o);
        for (; r.isEven(); ) r.rShiftTo(1, r), t ? ((s.isEven() && a.isEven()) || (s.addTo(this, s), a.subTo(e, a)), s.rShiftTo(1, s)) : a.isEven() || a.subTo(e, a), a.rShiftTo(1, a);
        0 <= n.compareTo(r) ? (n.subTo(r, n), t && i.subTo(s, i), o.subTo(a, o)) : (r.subTo(n, r), t && s.subTo(i, s), a.subTo(o, a));
    }
    return 0 != r.compareTo(BigInteger.ONE) ? BigInteger.ZERO : 0 <= a.compareTo(e) ? a.subtract(e) : a.signum() < 0 ? (a.addTo(e, a), a.signum() < 0 ? a.add(e) : a) : a;
}
(Classic.prototype.convert = cConvert),
    (Classic.prototype.revert = cRevert),
    (Classic.prototype.reduce = cReduce),
    (Classic.prototype.mulTo = cMulTo),
    (Classic.prototype.sqrTo = cSqrTo),
    (Montgomery.prototype.convert = montConvert),
    (Montgomery.prototype.revert = montRevert),
    (Montgomery.prototype.reduce = montReduce),
    (Montgomery.prototype.mulTo = montMulTo),
    (Montgomery.prototype.sqrTo = montSqrTo),
    (BigInteger.prototype.copyTo = bnpCopyTo),
    (BigInteger.prototype.fromInt = bnpFromInt),
    (BigInteger.prototype.fromString = bnpFromString),
    (BigInteger.prototype.clamp = bnpClamp),
    (BigInteger.prototype.dlShiftTo = bnpDLShiftTo),
    (BigInteger.prototype.drShiftTo = bnpDRShiftTo),
    (BigInteger.prototype.lShiftTo = bnpLShiftTo),
    (BigInteger.prototype.rShiftTo = bnpRShiftTo),
    (BigInteger.prototype.subTo = bnpSubTo),
    (BigInteger.prototype.multiplyTo = bnpMultiplyTo),
    (BigInteger.prototype.squareTo = bnpSquareTo),
    (BigInteger.prototype.divRemTo = bnpDivRemTo),
    (BigInteger.prototype.invDigit = bnpInvDigit),
    (BigInteger.prototype.isEven = bnpIsEven),
    (BigInteger.prototype.exp = bnpExp),
    (BigInteger.prototype.toString = bnToString),
    (BigInteger.prototype.negate = bnNegate),
    (BigInteger.prototype.abs = bnAbs),
    (BigInteger.prototype.compareTo = bnCompareTo),
    (BigInteger.prototype.bitLength = bnBitLength),
    (BigInteger.prototype.mod = bnMod),
    (BigInteger.prototype.modPowInt = bnModPowInt),
    (BigInteger.ZERO = nbv(0)),
    (BigInteger.ONE = nbv(1)),
    (NullExp.prototype.convert = nNop),
    (NullExp.prototype.revert = nNop),
    (NullExp.prototype.mulTo = nMulTo),
    (NullExp.prototype.sqrTo = nSqrTo),
    (Barrett.prototype.convert = barrettConvert),
    (Barrett.prototype.revert = barrettRevert),
    (Barrett.prototype.reduce = barrettReduce),
    (Barrett.prototype.mulTo = barrettMulTo),
    (Barrett.prototype.sqrTo = barrettSqrTo);
var lowprimes = [
        2,
        3,
        5,
        7,
        11,
        13,
        17,
        19,
        23,
        29,
        31,
        37,
        41,
        43,
        47,
        53,
        59,
        61,
        67,
        71,
        73,
        79,
        83,
        89,
        97,
        101,
        103,
        107,
        109,
        113,
        127,
        131,
        137,
        139,
        149,
        151,
        157,
        163,
        167,
        173,
        179,
        181,
        191,
        193,
        197,
        199,
        211,
        223,
        227,
        229,
        233,
        239,
        241,
        251,
        257,
        263,
        269,
        271,
        277,
        281,
        283,
        293,
        307,
        311,
        313,
        317,
        331,
        337,
        347,
        349,
        353,
        359,
        367,
        373,
        379,
        383,
        389,
        397,
        401,
        409,
        419,
        421,
        431,
        433,
        439,
        443,
        449,
        457,
        461,
        463,
        467,
        479,
        487,
        491,
        499,
        503,
        509,
        521,
        523,
        541,
        547,
        557,
        563,
        569,
        571,
        577,
        587,
        593,
        599,
        601,
        607,
        613,
        617,
        619,
        631,
        641,
        643,
        647,
        653,
        659,
        661,
        673,
        677,
        683,
        691,
        701,
        709,
        719,
        727,
        733,
        739,
        743,
        751,
        757,
        761,
        769,
        773,
        787,
        797,
        809,
        811,
        821,
        823,
        827,
        829,
        839,
        853,
        857,
        859,
        863,
        877,
        881,
        883,
        887,
        907,
        911,
        919,
        929,
        937,
        941,
        947,
        953,
        967,
        971,
        977,
        983,
        991,
        997,
    ],
    lplim = (1 << 26) / lowprimes[lowprimes.length - 1];
function bnIsProbablePrime(e) {
    var t,
        n = this.abs();
    if (1 == n.t && n[0] <= lowprimes[lowprimes.length - 1]) {
        for (t = 0; t < lowprimes.length; ++t) if (n[0] == lowprimes[t]) return !0;
        return !1;
    }
    if (n.isEven()) return !1;
    for (t = 1; t < lowprimes.length; ) {
        for (var r = lowprimes[t], i = t + 1; i < lowprimes.length && r < lplim; ) r *= lowprimes[i++];
        for (r = n.modInt(r); t < i; ) if (r % lowprimes[t++] == 0) return !1;
    }
    return n.millerRabin(e);
}
function bnpMillerRabin(e) {
    var t = this.subtract(BigInteger.ONE),
        n = t.getLowestSetBit();
    if (n <= 0) return !1;
    var r = t.shiftRight(n);
    (e = (e + 1) >> 1) > lowprimes.length && (e = lowprimes.length);
    for (var i = nbi(), o = 0; o < e; ++o) {
        i.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);
        var s = i.modPow(r, this);
        if (0 != s.compareTo(BigInteger.ONE) && 0 != s.compareTo(t)) {
            for (var a = 1; a++ < n && 0 != s.compareTo(t); ) if (0 == (s = s.modPowInt(2, this)).compareTo(BigInteger.ONE)) return !1;
            if (0 != s.compareTo(t)) return !1;
        }
    }
    return !0;
}
function Arcfour() {
    (this.i = 0), (this.j = 0), (this.S = new Array());
}
function ARC4init(e) {
    for (var t, n, r = 0; r < 256; ++r) this.S[r] = r;
    for (r = t = 0; r < 256; ++r) (t = (t + this.S[r] + e[r % e.length]) & 255), (n = this.S[r]), (this.S[r] = this.S[t]), (this.S[t] = n);
    (this.i = 0), (this.j = 0);
}
function ARC4next() {
    var e;
    return (this.i = (this.i + 1) & 255), (this.j = (this.j + this.S[this.i]) & 255), (e = this.S[this.i]), (this.S[this.i] = this.S[this.j]), (this.S[this.j] = e), this.S[(e + this.S[this.i]) & 255];
}
function prng_newstate() {
    return new Arcfour();
}
(BigInteger.prototype.chunkSize = bnpChunkSize),
    (BigInteger.prototype.toRadix = bnpToRadix),
    (BigInteger.prototype.fromRadix = bnpFromRadix),
    (BigInteger.prototype.fromNumber = bnpFromNumber),
    (BigInteger.prototype.bitwiseTo = bnpBitwiseTo),
    (BigInteger.prototype.changeBit = bnpChangeBit),
    (BigInteger.prototype.addTo = bnpAddTo),
    (BigInteger.prototype.dMultiply = bnpDMultiply),
    (BigInteger.prototype.dAddOffset = bnpDAddOffset),
    (BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo),
    (BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo),
    (BigInteger.prototype.modInt = bnpModInt),
    (BigInteger.prototype.millerRabin = bnpMillerRabin),
    (BigInteger.prototype.clone = bnClone),
    (BigInteger.prototype.intValue = bnIntValue),
    (BigInteger.prototype.byteValue = bnByteValue),
    (BigInteger.prototype.shortValue = bnShortValue),
    (BigInteger.prototype.signum = bnSigNum),
    (BigInteger.prototype.toByteArray = bnToByteArray),
    (BigInteger.prototype.equals = bnEquals),
    (BigInteger.prototype.min = bnMin),
    (BigInteger.prototype.max = bnMax),
    (BigInteger.prototype.and = bnAnd),
    (BigInteger.prototype.or = bnOr),
    (BigInteger.prototype.xor = bnXor),
    (BigInteger.prototype.andNot = bnAndNot),
    (BigInteger.prototype.not = bnNot),
    (BigInteger.prototype.shiftLeft = bnShiftLeft),
    (BigInteger.prototype.shiftRight = bnShiftRight),
    (BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit),
    (BigInteger.prototype.bitCount = bnBitCount),
    (BigInteger.prototype.testBit = bnTestBit),
    (BigInteger.prototype.setBit = bnSetBit),
    (BigInteger.prototype.clearBit = bnClearBit),
    (BigInteger.prototype.flipBit = bnFlipBit),
    (BigInteger.prototype.add = bnAdd),
    (BigInteger.prototype.subtract = bnSubtract),
    (BigInteger.prototype.multiply = bnMultiply),
    (BigInteger.prototype.divide = bnDivide),
    (BigInteger.prototype.remainder = bnRemainder),
    (BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder),
    (BigInteger.prototype.modPow = bnModPow),
    (BigInteger.prototype.modInverse = bnModInverse),
    (BigInteger.prototype.pow = bnPow),
    (BigInteger.prototype.gcd = bnGCD),
    (BigInteger.prototype.isProbablePrime = bnIsProbablePrime),
    (BigInteger.prototype.square = bnSquare),
    (Arcfour.prototype.init = ARC4init),
    (Arcfour.prototype.next = ARC4next);
var rng_psize = 256,
    rng_state,
    rng_pool,
    rng_pptr;
function rng_seed_int(e) {
    (rng_pool[rng_pptr++] ^= 255 & e), (rng_pool[rng_pptr++] ^= (e >> 8) & 255), (rng_pool[rng_pptr++] ^= (e >> 16) & 255), (rng_pool[rng_pptr++] ^= (e >> 24) & 255), rng_psize <= rng_pptr && (rng_pptr -= rng_psize);
}
function rng_seed_time() {
    rng_seed_int(new Date().getTime());
}
if (null == rng_pool) {
    var t,
        rng_pool = new Array(),
        rng_pptr = 0;
    if (window.crypto && window.crypto.getRandomValues) {
        var ua = new Uint8Array(32);
        for (window.crypto.getRandomValues(ua), t = 0; t < 32; ++t) rng_pool[rng_pptr++] = ua[t];
    }
    if ("Netscape" == navigator.appName && navigator.appVersion < "5" && window.crypto) for (var z = window.crypto.random(32), t = 0; t < z.length; ++t) rng_pool[rng_pptr++] = 255 & z.charCodeAt(t);
    for (; rng_pptr < rng_psize; ) (t = Math.floor(65536 * Math.random())), (rng_pool[rng_pptr++] = t >>> 8), (rng_pool[rng_pptr++] = 255 & t);
    (rng_pptr = 0), rng_seed_time();
}
function rng_get_byte() {
    if (null == rng_state) {
        for (rng_seed_time(), (rng_state = prng_newstate()).init(rng_pool), rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr) rng_pool[rng_pptr] = 0;
        rng_pptr = 0;
    }
    return rng_state.next();
}
function rng_get_bytes(e) {
    for (var t = 0; t < e.length; ++t) e[t] = rng_get_byte();
}
function SecureRandom() {}
SecureRandom.prototype.nextBytes = rng_get_bytes;
var RSAPublicKey = function (e, t) {
        (this.modulus = new BigInteger(Hex.encode(e), 16)), (this.encryptionExponent = new BigInteger(Hex.encode(t), 16));
    },
    UTF8 = {
        encode: function (e) {
            e = e.replace(/\r\n/g, "\n");
            for (var t = "", n = 0; n < e.length; n++) {
                var r = e.charCodeAt(n);
                r < 128
                    ? (t += String.fromCharCode(r))
                    : (127 < r && r < 2048 ? (t += String.fromCharCode((r >> 6) | 192)) : ((t += String.fromCharCode((r >> 12) | 224)), (t += String.fromCharCode(((r >> 6) & 63) | 128))), (t += String.fromCharCode((63 & r) | 128)));
            }
            return t;
        },
        decode: function (e) {
            var t,
                n = "",
                r = 0;
            for ($c1 = $c2 = 0; r < e.length; )
                (t = e.charCodeAt(r)) < 128
                    ? ((n += String.fromCharCode(t)), r++)
                    : 191 < t && t < 224
                    ? (($c2 = e.charCodeAt(r + 1)), (n += String.fromCharCode(((31 & t) << 6) | (63 & $c2))), (r += 2))
                    : (($c2 = e.charCodeAt(r + 1)), ($c3 = e.charCodeAt(r + 2)), (n += String.fromCharCode(((15 & t) << 12) | ((63 & $c2) << 6) | (63 & $c3))), (r += 3));
            return n;
        },
    },
    Base64 = {
        base64: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        encode: function (e) {
            if (!e) return !1;
            for (
                var t, n, r, i, o, s, a = "", l = 0;
                (r = (s = e.charCodeAt(l++)) >> 2),
                    (i = ((3 & s) << 4) | ((t = e.charCodeAt(l++)) >> 4)),
                    (o = ((15 & t) << 2) | ((n = e.charCodeAt(l++)) >> 6)),
                    (s = 63 & n),
                    isNaN(t) ? (o = s = 64) : isNaN(n) && (s = 64),
                    (a += this.base64.charAt(r) + this.base64.charAt(i) + this.base64.charAt(o) + this.base64.charAt(s)),
                    l < e.length;

            );
            return a;
        },
        decode: function (e) {
            if (!e) return !1;
            e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
            for (
                var t, n, r, i, o = "", s = 0;
                (t = this.base64.indexOf(e.charAt(s++))),
                    (n = this.base64.indexOf(e.charAt(s++))),
                    (r = this.base64.indexOf(e.charAt(s++))),
                    (i = this.base64.indexOf(e.charAt(s++))),
                    (o += String.fromCharCode((t << 2) | (n >> 4))),
                    64 != r && (o += String.fromCharCode(((15 & n) << 4) | (r >> 2))),
                    64 != i && (o += String.fromCharCode(((3 & r) << 6) | i)),
                    s < e.length;

            );
            return o;
        },
    },
    Hex = {
        hex: "0123456789abcdef",
        encode: function (e) {
            if (!e) return !1;
            for (var t, n = "", r = 0; (t = e.charCodeAt(r++)), (n += this.hex.charAt((t >> 4) & 15) + this.hex.charAt(15 & t)), r < e.length; );
            return n;
        },
        decode: function (e) {
            if (!e) return !1;
            e = e.replace(/[^0-9abcdef]/g, "");
            for (var t = "", n = 0; (t += String.fromCharCode(((this.hex.indexOf(e.charAt(n++)) << 4) & 240) | (15 & this.hex.indexOf(e.charAt(n++))))), n < e.length; );
            return t;
        },
    },
    ASN1Data = function (e) {
        (this.error = !1),
            (this.parse = function (e) {
                if (!e) return (this.error = !0), null;
                for (var t = []; 0 < e.length; ) {
                    var n = e.charCodeAt(0);
                    e = e.substr(1);
                    var r = 0;
                    if (5 == (31 & n)) e = e.substr(1);
                    else if (128 & e.charCodeAt(0)) {
                        var i = 127 & e.charCodeAt(0);
                        if (((e = e.substr(1)), 0 < i && (r = e.charCodeAt(0)), 1 < i && (r = (r << 8) | e.charCodeAt(1)), 2 < i)) return (this.error = !0), null;
                        e = e.substr(i);
                    } else (r = e.charCodeAt(0)), (e = e.substr(1));
                    i = "";
                    if (r) {
                        if (r > e.length) return (this.error = !0), null;
                        (i = e.substr(0, r)), (e = e.substr(r));
                    }
                    32 & n ? t.push(this.parse(i)) : t.push(this.value(128 & n ? 4 : 31 & n, i));
                }
                return t;
            }),
            (this.value = function (e, t) {
                if (1 == e) return !!t;
                if (2 == e) return t;
                if (3 == e) return this.parse(t.substr(1));
                if (5 == e) return null;
                if (6 != e) return null;
                var n = [],
                    e = t.charCodeAt(0);
                n.push(Math.floor(e / 40)), n.push(e - 40 * n[0]);
                for (var r = [], i = 0, o = 1; o < t.length; o++) {
                    var s = t.charCodeAt(o);
                    if ((r.push(127 & s), 128 & s)) i++;
                    else {
                        for (var a = 0, l = 0; l < r.length; l++) a += r[l] * Math.pow(128, i--);
                        n.push(a), (i = 0), (r = []);
                    }
                }
                return n.join(".");
            }),
            (this.data = this.parse(e));
    },
    RSA = {
        getPublicKey: function (e) {
            return (
                !(e.length < 50) &&
                "-----BEGIN PUBLIC KEY-----" == e.substr(0, 26) &&
                "-----END PUBLIC KEY-----" == (e = e.substr(26)).substr(e.length - 24) &&
                ((e = e.substr(0, e.length - 24)), !(e = new ASN1Data(Base64.decode(e))).error && "1.2.840.113549.1.1.1" == (e = e.data)[0][0][0] && new RSAPublicKey(e[0][1][0][0], e[0][1][0][1]))
            );
        },
        encrypt: function (e, t) {
            if (!t) return !1;
            var n = (t.modulus.bitLength() + 7) >> 3;
            if (!(e = this.pkcs1pad2(e, n))) return !1;
            if (!(e = e.modPowInt(t.encryptionExponent, t.modulus))) return !1;
            for (e = e.toString(16); e.length < 2 * n; ) e = "0" + e;
            return Base64.encode(Hex.decode(e));
        },
        decrypt: function (e, t) {
            if (!t) return !1;
            for (e = Hex.encode(Base64.decode(e)).toString(16); "0" == e[0]; ) e = e.replace("0", "");
            if (!(e = (e = new BigInteger(e, 16)).modPowInt(t.encryptionExponent, t.modulus))) return !1;
            t = (t.modulus.bitLength() + 7) >> 3;
            return (e = this.pkcs1unpad2(e, t));
        },
        pkcs1pad2: function (e, t) {
            if (t < e.length + 11) return null;
            for (var n = new Array(), r = e.length - 1; 0 <= r && 0 < t; ) {
                var i = e.charCodeAt(r--);
                i < 128 ? (n[--t] = i) : 127 < i && i < 2048 ? ((n[--t] = (63 & i) | 128), (n[--t] = (i >> 6) | 192)) : ((n[--t] = (63 & i) | 128), (n[--t] = ((i >> 6) & 63) | 128), (n[--t] = (i >> 12) | 224));
            }
            n[--t] = 0;
            for (var o = new SecureRandom(), s = new Array(); 2 < t; ) {
                for (s[0] = 0; 0 == s[0]; ) o.nextBytes(s);
                n[--t] = s[0];
            }
            return (n[--t] = 2), (n[--t] = 0), new BigInteger(n);
        },
        pkcs1unpad2: function (e, t) {
            for (var n = e.toByteArray(), r = 0; r < n.length && 0 == n[r]; ) ++r;
            for (++r; 0 != n[r]; ) if (++r >= n.length) return null;
            for (var i = ""; ++r < n.length; ) {
                var o = 255 & n[r];
                o < 128
                    ? (i += String.fromCharCode(o))
                    : 191 < o && o < 224
                    ? ((i += String.fromCharCode(((31 & o) << 6) | (63 & n[r + 1]))), ++r)
                    : ((i += String.fromCharCode(((15 & o) << 12) | ((63 & n[r + 1]) << 6) | (63 & n[r + 2]))), (r += 2));
            }
            return i;
        },
    },
    pusher;
function configure(e, t) {
    (t && !_.isUndefined(t)) || (t = window.__pusherAppOptions), (pusher = new Pusher(e, t));
}
function subscribe(e, t, n, r, i) {
    _.isUndefined(i) && (i = !1), configure(n), pusher || configure(n);
    e = pusher.subscribe(e);
    i && (pusher.disconnect(), e.unbind(t), pusher.connect()),
        e.bind(t, function (e) {
            r(e);
        });
}
function disconnect() {
    pusher && pusher.disconnect();
}
function accountSubscribe(e, t, n, r, i) {
    subscribe("channel-" + n, e, t, r, (i = _.isUndefined(i) ? !1 : i));
}
function subscribeNotification(e, t, n, r, i) {
    accountSubscribe(e, t, n, r, (i = _.isUndefined(i) ? !1 : i));
}
!(function (e) {
    "use strict";
    e.__InputSecurity = {
        rsaDecrypt: function (e) {
            return RSA.decrypt(e, __InputSecurity.getPublicRSA());
        },
        rsaEncrypt: function (e) {
            return RSA.encrypt(e, __InputSecurity.getPublicRSA());
        },
        getPublicRSA: function () {
            return RSA.getPublicKey(e.__pbkey || "-----BEGIN PUBLIC KEY-----MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAPJwwNa//eaQYxkNsAODohg38azVtalEh7Lw4wxlBrbDONgYaebgscpjPRloeL0kj4aLI462lcQGVAxhyh8JijsCAwEAAQ==-----END PUBLIC KEY-----");
        },
        processSecuredData: function (e) {
            if (e && e.__maskedData) {
                for (var t = e.__maskedData.split("__==__"), n = "", r = 0; r < t.length; r++) t[r] && (n += __InputSecurity.rsaDecrypt(t[r]));
                return JSON.parse(n);
            }
            return !1;
        },
        processResponseData: function (e) {
            var t = __InputSecurity.processSecuredData(e);
            return 0 == t ? e : t;
        },
        processFormFields: function (e, l) {
            var c;
            return (
                e &&
                    !_.isEmpty(e) &&
                    ((c = {}),
                    ((l = l || {}).secured = !0),
                    l && 1 == l.secured
                        ? _.forEach(e, function (e, t) {
                              if ((l.unsecuredFields && !1 !== _.includes(l.unsecuredFields, t)) || (!0 !== _.isArray(e) && !0 !== _.isObject(e))) {
                                  if ((l.unsecuredFields && !1 !== _.includes(l.unsecuredFields, t)) || !0 === _.isArray(e) || !0 === _.isObject(e)) c[t] = e;
                                  else if (e || 0 == e) {
                                      (_.isBoolean(e) || _.isNumber(e)) && (e = String(e));
                                      var n = __InputSecurity.rsaEncrypt(e);
                                      if (0 == n) {
                                          for (var r = e.match(/.{1,30}/g), i = "", o = 0; o < r.length; o++) {
                                              var s = __InputSecurity.rsaEncrypt(r[o]);
                                              if (0 == s) throw "Encryption Failed for { " + t + " } VALUE due to length";
                                              i = i + s + "__==__";
                                          }
                                          n = i;
                                      }
                                      var a = __InputSecurity.rsaEncrypt(t);
                                      if (0 == a) throw "Encryption Failed for { " + a + " } KEY due to length";
                                      c[a] = n;
                                  }
                              } else c[t] = __InputSecurity.processFormFields(e);
                          })
                        : (c = e)),
                c
            );
        },
    };
})(window),
    (function (p) {
        "use strict";
        (_.templateSettings.variable = "__tData"),
            (p.__globals = { translate_strings: {}, default_show_message: !1 }),
            (p.__Utils = {
                log: function (e, t) {
                    var n, r;
                    p.appConfig && p.appConfig.debug && ((r = n = ""), t && _.isString(e) ? ((n = t), (r = "%c "), console.log(r + e, n)) : console.log(e));
                },
                syntaxHighlight: function (e) {
                    return (e = e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (e) {
                        var t = "color: darkorange;";
                        return /^"/.test(e) ? (t = /:$/.test(e) ? "color: red;" : "color: green;") : /true|false/.test(e) ? (t = "color: blue;") : /null/.test(e) && (t = "color: magenta;"), '<span style="' + t + '">' + e + "</span>";
                    });
                },
                displayInTabWindow: function (e) {
                    var t;
                    p.appConfig &&
                        p.appConfig.debug &&
                        (e
                            ? ((t = ""),
                              _.isObject(e)
                                  ? (_.has(e, "data") &&
                                        (t =
                                            '<pre style="font-size:14px; outline: 1px solid #ccc; padding: 10px; margin: 0px;"><strong>URL: </strong>' +
                                            (e.config ? e.config.url : "") +
                                            " <strong><br>Method: </strong>" +
                                            (e.config ? e.config.method : "") +
                                            " <strong><br>statusText: </strong>" +
                                            e.statusText +
                                            " (" +
                                            e.status +
                                            ') <strong style="color:red"><br>Error Message: ' +
                                            e.data.message +
                                            "</strong></pre>"),
                                    (t += '<pre style="outline: 1px solid #ccc; padding: 5px; margin: 0px;">' + __Utils.syntaxHighlight(JSON.stringify(e, null, 4)) + "</pre>"))
                                  : (t = e),
                              (e = p.open("", "_blank")).document.write(t),
                              e.document.close(),
                              e.focus())
                            : console.log("__Utils: Text not found for window."));
                },
                openEmailDebugView: function (e) {
                    p.appConfig && p.appConfig.debug && (p.open(e, "__emailDebugView"), __Utils.info("Request Sent to open Email Debug View."));
                },
                error: function (e) {
                    p.appConfig && p.appConfig.debug && console.error(e);
                },
                info: function (e) {
                    p.appConfig && p.appConfig.debug && console.info(e);
                },
                warn: function (e) {
                    p.appConfig && p.appConfig.debug && console.warn(e);
                },
                throwError: function (e) {
                    if (p.appConfig && p.appConfig.debug) throw new Error(e);
                },
                jsdd: function (e) {
                    var t;
                    if (
                        p.appConfig &&
                        p.appConfig.debug &&
                        (e.__dd &&
                            e.__pr &&
                            (e.__prExecuted ||
                                ((t = 1),
                                _.forEach(e.__pr, function (e) {
                                    var n = "";
                                    console.log("%c Server __pr " + t + " --------------------------------------------------", "color:#f0ad4e"),
                                        _.forEach(e, function (e, t) {
                                            "debug_backtrace" !== t ? console.log(e) : (n = e);
                                        }),
                                        console.log("%c Reference  --------------------------------------------------", "color:#f0ad4e"),
                                        console.log(n),
                                        t++;
                                }),
                                (e.__prExecuted = !0),
                                console.log("%c ------------------------------------------------------------ __pr end", "color: #f0ad4e"))),
                        e.__dd && e.__clog && (e.__clogExecuted || (__Utils.clog(e), (e.__clogExecuted = !0))),
                        e.__dd && "__dd" === e.__dd)
                    )
                        throw (
                            (e.__ddExecuted ||
                                (console.log("%c Server __dd  --------------------------------------------------", "color:#ff0000"),
                                _.forEach(e.data, function (e, t) {
                                    "debug_backtrace" !== t ? (console.log(e), 0) : (console.log("%c Reference  --------------------------------------------------", "color:#ff0000"), console.log(e));
                                }),
                                (e.__ddExecuted = !0)),
                            console.log("%c ------------------------------------------------------------ __dd end", "color: #ff0000"),
                            "------------------------------------------------------------ __dd end.")
                        );
                },
                clog: function (e) {
                    var t = t || { __clogCount: 0 },
                        n = 1,
                        r = e.__clogType || "";
                    _.forEach(e.__clog, function (e) {
                        _.forEach(e, function (e) {
                            console.log("%c __clog " + r + " " + n + " --------------------------------------------------", "color: #bada55"), console.log("%c " + e, "color: #9c9c9c"), n++, t.__clogCount++;
                        });
                    }),
                        console.log("%c ------------------------------------------------------------ __clog " + r + " items end. TotalCount: " + t.__clogCount, "color: #bada55");
                },
                detectIE: function () {
                    var e = p.navigator.userAgent,
                        t = e.indexOf("MSIE ");
                    if (0 < t) return parseInt(e.substring(t + 5, e.indexOf(".", t)), 10);
                    if (0 < e.indexOf("Trident/")) {
                        var n = e.indexOf("rv:");
                        return parseInt(e.substring(n + 3, e.indexOf(".", n)), 10);
                    }
                    n = e.indexOf("Edge/");
                    return 0 < n && parseInt(e.substring(n + 5, e.indexOf(".", n)), 10);
                },
                time: function (e) {
                    p.appConfig && p.appConfig.debug && (11 <= __Utils.detectIE() || 0 == __Utils.detectIE()) && console.time(e);
                },
                timeEnd: function (e) {
                    p.appConfig && p.appConfig.debug && (11 <= __Utils.detectIE() || 0 == __Utils.detectIE()) && console.timeEnd(e);
                },
                modalTemplatize: function (r, i, t) {
                    var e = $(r),
                        o = $.Deferred(),
                        n = e.data("modalEvent"),
                        s = e.data("modalCloseEvent"),
                        a = e.data("modalId"),
                        l = (_.template(e.html()), e.data("replaceTarget"), {});
                    return (
                        i
                            ? $(a).on((n || "show") + ".bs.modal", function (e) {
                                  var t = $(r),
                                      n = _.template(t.html()),
                                      t = t.data("replaceTarget");
                                  "function" == typeof i ? ((l = i(e, $(e.relatedTarget).data())), o.resolve(l)) : __Utils.error("responseCallback should be function"), $(t || "modal-body").html(n(l));
                              })
                            : o.resolve(l),
                        t &&
                            $(a).on((s || "hidden") + ".bs.modal", function (e) {
                                "function" == typeof t ? t(e, l) : __Utils.error("closeCallback should be function");
                            }),
                        (e = s = a = l = null),
                        o.promise()
                    );
                },
                queryConvertToObject: function (e) {
                    if (_.isString(e)) {
                        for (var t = e.replace("?", "&").replace(/\+/g, '%20').split("&"), n = {}, r = 0, i = t.length; r < i; r++) {
                            var o = t[r].split("=");
                            n[decodeURIComponent(o[0])] = decodeURIComponent(o[1]);
                        }
                        return (e = t = null), n;
                    }
                    return e;
                },
                viewReload: function () {
                    location.reload();
                },
                template: function (e, t) {
                    if ((r = $("script" + e).html())) {
                        var n = _.template(r),
                            r = (e = null);
                        return n(t);
                    }
                    return t;
                },
                apiURL: function (n, e) {
                    return (
                        _.isString(n)
                            ? !_.isEmpty(e) &&
                              _.isObject(e) &&
                              _.forEach(e, function (e, t) {
                                  n = n.replace(t, e);
                              })
                            : __Utils.error("__Utils:: Invalid API url"),
                        (e = null),
                        n
                    );
                },
                getTranslation: function (e, t) {
                    return __globals.translate_strings[e] || t || e;
                },
                setTranslation: function (e, t) {
                    return _.isObject(e) ? ((__globals.translate_strings = _.assign(__globals.translate_strings, e)), !(e = t = null)) : _.isString(e) && t ? ((__globals.translate_strings[e] = t), !(e = t = null)) : ((e = t = null), !1);
                },
                lwReInitPlugins: function (e) {
                    e = e.find("[data-lw-plugin]");
                    e.length &&
                        $.each(e, function (e, t) {
                            t = $(t);
                            p.lwPluginFuncs[t.data("lw-plugin")]("[data-lw-plugin=" + t.data("lw-plugin") + "]");
                        });
                },
            }),
            (__globals.clog = __Utils.clog),
            (p.__DataRequest = {
                __processSubmitForm: function (e, t) {
                    if (
                        (t.validate({
                            errorClass: "lw-validation-error",
                            errorPlacement: function (e, t) {
                                var n = $(t);
                                ($(".lw-error-container-" + n.prop("name")).length
                                    ? $(".lw-error-container-" + n.prop("name"))
                                          .addClass("lw-validation-error")
                                          .html(e)
                                    : n.siblings(".input-group-prepend").length || n.siblings(".input-group-append").length
                                    ? e.insertAfter(n.parents(".input-group"))
                                    : $(t).parent().hasClass("selectize-input")
                                    ? e.insertAfter(n.parents(".selectize-input"))
                                    : e.insertAfter(t)
                                ).show();
                            },
                        }),
                        !t.valid())
                    )
                        return t.addClass("lw-form-has-errors").addClass(t.data("error-class")), !1;
                    t.data("show-processing") &&
                        t.addClass("lw-form-in-process").prepend('<div class="lw-spinner-box"><div class="text-center align-middle"><div class="lds-ring"><div></div><div></div><div></div><div></div></div><div></div>'),
                        e.data("action") && t.attr("action", e.data("action")),
                        __DataRequest.process(t).then(function (e) {
                            t.data("show-processing") &&
                                (21 == (e = e.responseJSON).reaction ||
                                    (e.response_action && "redirect" == e.response_action.type) ||
                                    t.removeClass("lw-form-has-errors").removeClass("lw-form-in-process").removeClass(t.data("error-class")).find(".lw-spinner-box").remove());
                        });
                },
                process: function (e) {
                    var t,
                        n = e.is("form"),
                        r = e.data("method") ? e.data("method") : !0 === n ? "post" : "get",
                        i = e.data("unsecured-fields"),
                        o = e.data("secured"),
                        s = n ? e.attr("action") : e.data("action") ? e.data("action") : e.attr("href"),
                        a = {};
                    i && (a.unsecuredFields = i.split(",")), (t = 1 == o ? __InputSecurity.processFormFields(__Utils.queryConvertToObject(!0 === n ? e.serialize() : e.data("post-data")), a) : !0 === n ? e.serialize() : e.data("post-data"));
                    var l = _.get(p, e.data("callback")),
                        c = { thisScope: e };
                    _.isUndefined(l) && (l = null),
                        e.data("pre-callback") && (c.preCallback = _.get(p, e.data("pre-callback"))),
                        (c.callbackParams = null),
                        e.data("callback-params") && (c.callbackParams = e.data("callbackParams")),
                        e.data("showMessage") && (c.showMessage = e.data("showMessage")),
                        (c.responseTemplate = null),
                        e.data("responseTemplate") && (c.responseTemplate = e.data("responseTemplate"));
                    (e = __DataRequest.__protectedAjaxProcess(s, t, l, r, c)), (n = i = a = t = l = c = null);
                    return e;
                },
                post: function (e, t, n, r) {
                    (t = t || {}), (n = n || null);
                    var i = __DataRequest.__protectedAjaxProcess(e, t, n, "post", r);
                    return (e = t = n = r = null), i;
                },
                get: function (e, t, n, r) {
                    (t = t || {}), (n = n || null);
                    var i = __DataRequest.__protectedAjaxProcess(e, t, n, "get", r);
                    return (e = t = n = r = null), i;
                },
                __protectedAjaxProcess: function (n, e, r, i, o) {
                    var s = $.Deferred();
                    (o = o || {}), (e = __Utils.queryConvertToObject(e)), (o = _.assign({ csrf: !0, thisScope: $(this), preCallback: null, showMessage: !1 }, o));
                    var a,
                        t = {};
                    return (
                        (a = o.thisScope instanceof jQuery ? o.thisScope : $(o.thisScope)).data("is-request-processing", !0).addClass("lw-form-processing"),
                        !0 === o.csrf && (t["X-CSRF-TOKEN"] = appConfig.csrf_token),
                        o.preCallback && _.isFunction(o.preCallback) && (e = o.preCallback(e, a)),
                        $.ajax({
                            type: i || "get",
                            url: n,
                            dataType: "JSON",
                            data: e || {},
                            headers: t,
                            error: function (e) {
                                a.prop("disabled", !1).removeClass("disabled"),
                                    a.data("is-request-processing", !1).removeClass("lw-form-processing"),
                                    s.resolve(e),
                                    showErrorMessage(
                                        e.responseJSON && e.responseJSON.message ? e.responseJSON.message : e.responseJSON && e.responseJSON.data && e.responseJSON.data.message ? e.responseJSON.data.message : "Message not available"
                                    ),
                                    422 === e.status
                                        ? $.each(e.responseJSON.errors, function (e, t) {
                                              _.includes(e, ".") &&
                                                  (e = e.replace(/\.(.+?)(?=\.|$)/g, function (e, t) {
                                                      return "[" + t + "]";
                                                  })),
                                                  (a.find("#" + e + "-error").length
                                                      ? a.find("#" + e + "-error").text(t)
                                                      : $(".lw-error-container-" + a.find('[name="' + e + '"]').prop("name")).length
                                                      ? $(".lw-error-container-" + a.find('[name="' + e + '"]').prop("name"))
                                                            .addClass("lw-validation-error")
                                                            .html(t)
                                                      : a.find('.input-group-prepend ~ [name="' + e + '"]').length || a.find('[name="' + e + '"] ~ .input-group-append').length
                                                      ? $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter(a.find('[name="' + e + '"]').parents(".input-group"))
                                                      : a.find('label > [name="' + e + '"]').length
                                                      ? $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter($(a.find('[name="' + e + '"]')[0]).parent())
                                                      : a.find('[name="' + e + '"] ~ .selectize-control').length
                                                      ? $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter(a.find('[name="' + e + '"] ~ .selectize-control'))
                                                      : $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter(a.find('[name="' + e + '"]')[0])
                                                  ).show();
                                          })
                                        : e.responseJSON && !e.responseJSON.reaction && __Utils.displayInTabWindow(e.responseJSON);
                            },
                            beforeSend: function () {
                                var e;
                                !o.responseTemplate || ((e = $(o.responseTemplate).parents("form.lw-form")).length && e.addClass("lw-form-processing")),
                                    a.prop("disabled", "disabled").addClass("disabled"),
                                    __Utils.time("DataRequest." + i + " " + n + " ");
                            },
                            success: function (e) {
                                var t;
                                (e = __InputSecurity.processResponseData(e)),
                                    o.responseTemplate &&
                                        1 == e.reaction &&
                                        ((t = $("script" + o.responseTemplate + "-template")),
                                        (n = $(o.responseTemplate)),
                                        (t = _.template(t.html())),
                                        n.html(t(e.data)),
                                        n.find(".lw-file-uploader").length && p.initUploader(),
                                        __Utils.lwReInitPlugins(n),
                                        (n = n.parents("form.lw-form")).length && n.removeClass("lw-form-processing"));
                                var n = !1;
                                (e.show_message || o.showMessage || (e.data && e.data.show_message)) && (n = !0),
                                    !0 === p.__globals.default_show_message && (n = !e.hide_message && !o.hideMessage),
                                    e.message && n
                                        ? (1 == e.reaction_code ? showSuccessMessage : 14 == e.reaction_code ? showWarnMessage : showErrorMessage)(e.message)
                                        : e.data && n && (n = e.data.message || null) && (1 == e.reaction ? showSuccessMessage : 14 == e.reaction ? showWarnMessage : showErrorMessage)(n),
                                    e.data && e.client_models && !_.isEmpty(e.client_models) && __DataRequest.updateModels(e.client_models),
                                    e.data &&
                                        e.data.errors &&
                                        (_.includes(key, ".") &&
                                            (key = key.replace(/\.(.+?)(?=\.|$)/g, function (e, t) {
                                                return "[" + t + "]";
                                            })),
                                        $.each(e.data.errors, function (e, t) {
                                            (a.find("#" + e + "-error").length
                                                ? a.find("#" + e + "-error").text(t)
                                                : $(".lw-error-container-" + a.find('[name="' + e + '"]').prop("name")).length
                                                ? $(".lw-error-container-" + a.find('[name="' + e + '"]').prop("name"))
                                                      .addClass("lw-validation-error")
                                                      .html(t)
                                                : a.find('.input-group-prepend ~ [name="' + e + '"]').length || a.find('[name="' + e + '"] ~ .input-group-append').length
                                                ? $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter(a.find('[name="' + e + '"]').parents(".input-group"))
                                                : a.find('label > [name="' + e + '"]').length
                                                ? $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter($(a.find('[name="' + e + '"]')[0]).parent())
                                                : a.find('[name="' + e + '"] ~ .selectize-control').length
                                                ? $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter(a.find('[name="' + e + '"] ~ .selectize-control'))
                                                : $('<label id="' + e + '-error" class="lw-validation-error">' + t + "</label>").insertAfter(a.find('[name="' + e + '"]')[0])
                                            ).show();
                                        })),
                                    21 == e.reaction && (_.has(e.data, "redirectUrl") ? (p.location = e.data.redirectUrl) : _.has(e.data, "redirect_to") && (p.location = e.data.redirect_to)),
                                    r && "function" == typeof r && r(e, o.callbackParams, a),
                                    e.response_action && ("redirect" === e.response_action.type ? (p.location = e.response_action.url) : "replace" === e.response_action.type && $(e.response_action.target).html(e.response_action.content));
                            },
                            complete: function (e) {
                                var t = __InputSecurity.processResponseData(e.responseJSON);
                                s.resolve(_.assign(e, { responseJSON: t })),
                                    21 == t.reaction || (t.response_action && "redirect" == t.response_action.type) || (a.prop("disabled", !1).removeClass("disabled"), a.data("is-request-processing", !1).removeClass("lw-form-processing")),
                                    __Utils.timeEnd("DataRequest." + i + " " + n + " "),
                                    t && t.__emailDebugView && __Utils.openEmailDebugView(t.__emailDebugView),
                                    t && t.__dd && __Utils.jsdd(t);
                            },
                        }),
                        s.promise()
                    );
                },
                updateModels: function (t, e) {
                    t && _.isObject(t) ? ((e = t), (t = "")) : t && _.isString(t) ? (t += ".") : (t = ""), e && !_.isObject(e) && __Utils.error("dataObject should be present as object");
                    var n,
                        r,
                        i,
                        o,
                        s,
                        a = document.querySelectorAll("[x-data]"),
                        l = _.size(e),
                        c = 1;
                    for (n in e)
                        e &&
                            e.hasOwnProperty(n) &&
                            ((r = e[n]),
                            a.length &&
                                _.each(a, function (e) {
                                    e._x_dataStack && e._x_dataStack[0] && !_.isUndefined(e._x_dataStack[0][t + n]) && (e._x_dataStack[0][t + n] = r),
                                        c === l &&
                                            _.delay(function () {
                                                var e = $("[data-lw-plugin-on-model-update]");
                                                e.length &&
                                                    $.each(e, function (e, t) {
                                                        t = $(t);
                                                        p.lwPluginFuncs[t.data("lw-plugin-on-model-update")]("[data-lw-plugin-on-model-update=" + t.data("lw-plugin-on-model-update") + "]");
                                                    });
                                            }, 500),
                                        c++;
                                }),
                            (i = $.find('[data-model="' + t + n + '"]')).length &&
                                $.each(i, function (e, t) {
                                    t = $(t);
                                    t.is("input:radio") || t.is("input:checkbox") ? (r && t.val() == r ? t.prop("checked", !0) : t.prop("checked", !1)) : t.is("input") || t.is("select") ? t.val(r) : t.text(r);
                                }),
                            (o = $.find('[data-model-html="' + t + n + '"]')).length &&
                                $.each(o, function (e, t) {
                                    t = $(t);
                                    t.html(r);
                                }),
                            (s = $.find('[data-show-if="' + t + n + '"]')).length &&
                                $.each(s, function (e, t) {
                                    t = $(t);
                                    _.get(p, r) || r ? t.show() : t.hide();
                                }),
                            (i = o = s = r = null));
                    t = null;
                },
            }),
            (p.__dd = function (e, t) {
                if (p.appConfig && p.appConfig.debug) {
                    console.error("JS __dd --------------------------------------------------");
                    for (var n = Array.prototype.slice.call(arguments), r = 0; r < n.length; ++r) console.log(n[r]);
                    throw new Error("-------------------------------------------------- JS __dd END");
                }
            }),
            (p.__pr = function () {
                if (p.appConfig && p.appConfig.debug) {
                    console.info("JS __pr --------------------------------------------------");
                    for (var e = Array.prototype.slice.call(arguments), t = 0; t < e.length; ++t) console.log(e[t]);
                    console.groupCollapsed("-------------------------------------------------- JS __pr END"), console.trace(), console.groupEnd();
                }
            }),
            (p.__Cookie = {
                set: function (e, t, n) {
                    var r = new Date();
                    r.setTime(r.getTime() + 24 * n * 60 * 60 * 1e3);
                    r = "expires=" + r.toUTCString();
                    document.cookie = e + "=" + t + ";" + r + ";path=/";
                },
                get: function (e) {
                    for (var t = e + "=", n = document.cookie.split(";"), r = 0; r < n.length; r++) {
                        for (var i = n[r]; " " == i.charAt(0); ) i = i.substring(1);
                        if (0 == i.indexOf(t)) return i.substring(t.length, i.length);
                    }
                    return "";
                },
            }),
            (p.toJsonString = function (e) {
                return JSON.stringify(e);
            }),
            $("body").on("submit", "form.lw-ajax-form", function (e) {  
                e.preventDefault();
                var t = $(e.target),
                    n = $(this),
                    r = n.data("confirm"),
                    i = n.data("confirm-options"),
                    o = n.data("confirm-params");
                if (!r) {
                    (e = __DataRequest.__processSubmitForm(t, n)), (t = n = null), (r = i = o = null);
                    return e;
                }
                showConfirmation(
                    r,
                    function () {
                        var e = __DataRequest.__processSubmitForm(t, n);
                        return (t = n = null), (r = i = o = null), e;
                    },
                    i || {},
                    o || {}
                );
            }),
            $("body").on("change", "form.lw-ajax-form[lwSubmitOnChange]", function (e) {
                e.preventDefault();
                var t = $(e.target),
                    n = $(this),
                    e = __DataRequest.__processSubmitForm(t, n);
                return e;
            }),
            $("body").on("click", ".lw-ajax-form-submit-action", function (e) {
                e.preventDefault();
                var t = (n = $(this)).parents("form"),
                    e = __DataRequest.__processSubmitForm(n, t),
                    n = null;
                return e;
            }),
            $("body").on("click", ".lw-ajax-link-action", function (e) {
                e.preventDefault();
                var t = $(this),
                    n = t.data("confirm"),
                    r = t.data("confirm-options"),
                    i = t.data("confirm-params");
                if (!n) return (n = r = i = null), __DataRequest.process(t);
                showConfirmation(
                    n,
                    function () {
                        return (n = r = i = null), __DataRequest.process(t);
                    },
                    r || {},
                    i || {}
                );
            }),
            $("body").on("click", ".lw-ajax-link-action-via-confirm", function (e) {
                e.preventDefault();
                var t = $(this),
                    n = t.data("confirm"),
                    r = t.data("confirm-options"),
                    e = t.data("confirm-params");
                n &&
                    showConfirmation(
                        n,
                        function () {
                            return __DataRequest.process(t);
                        },
                        r || {},
                        e || {}
                    );
            });
    })(window),
    (function (o) {
        "use strict";
        $.extend($.fn.dataTable.defaults, {
            serverSide: !0,
            iCookieDuration: 60,
            paging: !0,
            processing: !0,
            responsive: !0,
            destroy: !0,
            retrieve: !0,
            lengthChange: !0,
            language: { emptyTable: "There are no records to display." },
            searching: !1,
            ajax: {
                data: function (e) {
                    e.page = e.start / e.length + 1;
                },
            },
        }),
            (o.dataTable = function (e, t, n, r) {
                return (
                    r && (t.callbackFunction = r),
                    $(e).DataTable(
                        (function (s, a) {
                            (a && _.isObject(a)) || (a = {});
                            var e = {
                                ajax: function (e, t, n) {
                                    e.page = e.start / e.length + 1;
                                    var r = e.draw || !1,
                                        i = { params: e, fresh: a.fresh || !1 };
                                    _.has(a, "persist") && (i.persist = a.persist);
                                    var o = s.url,
                                        e = "";
                                    i.params && ((e = o + "?" + $.param(i.params)), _.has(i.params, "draw") && delete i.params.draw, $.param(i.params)),
                                        __DataRequest.get(
                                            e,
                                            {},
                                            function (e) {
                                                (e.draw = r), s.callbackFunction && _.isFunction(s.callbackFunction) && s.callbackFunction.call(this, e), t(e);
                                            },
                                            { thisScope: s.scope }
                                        );
                                },
                                drawCallback: function (e) {
                                    var t = this.api().table();
                                    _.has(t.columns, "adjust") &&
                                        _.has(t.responsive, "recalc") &&
                                        _.delay(function () {
                                            t.columns.adjust().responsive.recalc();
                                        }, 180);
                                },
                                columns: [],
                                responsive: {
                                    details: {
                                        renderer: function (e, t, n) {
                                            return _.map(n, function (e, t) {
                                                return e.hidden
                                                    ? '<li data-dtr-index="' +
                                                          e.columnIndex +
                                                          '" data-dt-row="' +
                                                          e.rowIndex +
                                                          '" data-dt-column="' +
                                                          e.columnIndex +
                                                          '"><span class="dtr-title">' +
                                                          e.title +
                                                          '</span> <span class="dtr-data">' +
                                                          e.data +
                                                          "</span></li>"
                                                    : "";
                                            }).join("");
                                        },
                                    },
                                },
                            };
                            s.dtOptions && _.assign(e, s.dtOptions);
                            return (
                                (e.columns = _.map(s.columnsData, function (i) {
                                    return {
                                        defaultContent: "",
                                        data: i.name || null,
                                        orderable: !!i.orderable,
                                        render: function (e, t, n, r) {
                                            return i.name ? (n.dtSubject = i.name) : (n = e), i.template ? __Utils.template(i.template, n) : n[i.name];
                                        },
                                    };
                                })),
                                e
                            );
                        })(t, n)
                    )
                );
            }),
            (o.reloadDT = function (e) {
                e.ajax.reload(null, !1), __Utils.log("__DataStore:: DataTable reloaded");
            }),
            document.addEventListener("DOMContentLoaded", function () {
                var e = $("[lwDataTable]");
                e.length &&
                    e.each(function (e) {
                        var t = $(this),
                            n = [],
                            r = t.data(),
                            i = { searching: !0 };
                        if (
                            (t.find("thead th").each(function (e) {
                                n.push(_.assign({ name: _.snakeCase($(this).text()) }, $(this).data()));
                            }),
                            t.removeData(),
                            r.pageLength && _.isInteger(r.pageLength) && ((i.pageLength = r.pageLength), $.extend($.fn.dataTable.defaults, { lengthMenu: _.assign($.fn.dataTable.defaults.aLengthMenu, [i.pageLength]) })),
                            r.order && (i.order = r.order),
                            r.rowcallback && (o[r.rowcallback], (i.rowCallback = o[r.rowcallback])),
                            _.isEmpty(n))
                        )
                            throw Error("Columns not defined");
                        if (!r.url) throw Error("DataTable url is missing, it should be on table as data-url");
                        dataTable(t, { url: r.url, dtOptions: i, columnsData: n, scope: t });
                    });
            });
    })(window),
    (function (e) {
        "use strict";
        var t = { layout: "topRight", theme: "bootstrap-v4", progressBar: !0, timeout: 3e3, closeWith: ["click"], animation: { open: "animated bounceInRight", close: "animated bounceOutRight" } };
        (e.showSuccessMessage = function (e) {
            new Noty($.extend({}, t, { type: "success", text: e })).show();
        }),
            (e.showErrorMessage = function (e) {
                new Noty($.extend({}, t, { type: "error", text: e })).show();
            }),
            (e.showInfoMessage = function (e) {
                new Noty($.extend({}, t, { type: "info", text: e })).show();
            }),
            (e.showWarnMessage = function (e) {
                new Noty($.extend({}, t, { type: "warning", text: e })).show();
            }),
            (e.showConfirmation = function (e, t, n, r) {
                var i = !_.includes(e, " ") && $(e),
                    o = "",
                    o = i && i.length ? _.template(i.html()) : e;
                (n = n || {}),
                    (n = _.assign({ showCancelBtn: !0, type: "warning", confirmBtnColor: "#d33d33", cancelButtonText: "Cancel", confirmButtonText: "Yes" }, n)),
                    (r = r || {}),
                    Swal.fire({ html: _.isString(o) ? o : o(r), icon: n.type, showCancelButton: n.showCancelBtn, confirmButtonColor: n.confirmBtnColor, cancelButtonText: n.cancelButtonText, confirmButtonText: n.confirmButtonText }).then(
                        function (e) {
                            e.isConfirmed && t();
                        }
                    );
            }),
            (e.showAlert = function (e, t) {
                Swal.fire({ icon: t || "info", text: e });
            });
    })(window),
    configure("");
var rtc = { client: null, joined: !1, published: !1, localStream: null, remoteStreams: [], params: {} },
    userType = null;
function addView(e, t) {
    $("#" + e)[0] ||
        ($("<div/>", { id: "remote_video_panel_" + e, class: "video-view" }).appendTo("#video"),
        $("<div/>", { id: "remote_video_" + e, class: "video-placeholder remote-video" }).appendTo("#remote_video_panel_" + e),
        $("<div/>", { id: "remote_video_info_" + e, class: "video-profile " + (t ? "" : "hide") }).appendTo("#remote_video_panel_" + e),
        $("<div/>", { id: "video_autoplay_" + e, class: "autoplay-fallback hide" }).appendTo("#remote_video_panel_" + e));
}
function removeView(e) {
    $("#remote_video_panel_" + e)[0] && $("#remote_video_panel_" + e).remove();
}
var __AudioVisualRequest = {
        handleCallEvents: function (n, e, t, r) {
            n.client.on("peer-leave", function (e) {
                e.uid != n.params.uid && removeView(), r({ peer_leave: !0 });
            }),
                n.client.on("stream-published", function (e) {
                    r({ stream_publish: !0 });
                }),
                n.client.on("stream-added", function (e) {
                    e = e.stream;
                    e.getId() !== n.params.uid &&
                        n.client.subscribe(e, function (e) {
                            t({ error: !0, result: e });
                        });
                }),
                n.client.on("stream-subscribed", function (e) {
                    var t = e.stream,
                        e = t.getId();
                    n.remoteStreams.push(t), addView(e), t.play("remote_video_" + e), r({ stream_subscribe: !0 });
                }),
                n.client.on("stream-removed", function (e) {
                    var e = e.stream,
                        t = e.getId();
                    e.stop("remote_video_" + t),
                        (n.remoteStreams = n.remoteStreams.filter(function (e) {
                            return e.getId() !== t;
                        })),
                        removeView(t);
                });
        },
        joinCall: function (t, e, n, r, i) {
            var o = { appID: t.agoraAppID, channel: t.channel, uid: e, token: t.token };
            (rtc.client = AgoraRTC.createClient({ mode: "rtc", codec: "h264" })),
                __AudioVisualRequest.handleCallEvents(rtc, n, r, i),
                rtc.client.init(
                    o.appID,
                    function () {
                        rtc.client.join(
                            o.token,
                            o.channel,
                            o.uid,
                            function (e) {
                                rtc.params.uid = e;
                                e = !1;
                                2 == t.callType && (e = !0),
                                    (rtc.localStream = AgoraRTC.createStream({ streamID: rtc.params.uid, audio: !0, video: e, screen: !1 })),
                                    navigator.mediaDevices
                                        .getUserMedia({ audio: !0, video: e })
                                        .then(function (e) {})
                                        .catch(function (e) {
                                            r({ error: !0, result: e });
                                        }),
                                    rtc.localStream.init(
                                        function () {
                                            rtc.localStream.play("local_stream"),
                                                rtc.client.publish(rtc.localStream, function (e) {
                                                    r({ error: !0, errortype: "Publish stream error", result: e });
                                                });
                                        },
                                        function (e) {
                                            r({ error: !0, errortype: "Local stream initialize error", result: e });
                                        }
                                    );
                            },
                            function (e) {
                                r({ error: !0, errortype: "Join channel error", result: e });
                            }
                        );
                    },
                    function (e) {
                        r({ error: !0, errortype: "Initialize client error", result: e });
                    }
                );
        },
        disconnectCall: function (n) {
            rtc.client
                ? rtc.client.leave(
                      function () {
                          for (rtc.localStream.stop(), rtc.localStream.close(); 0 < rtc.remoteStreams.length; ) {
                              var e = rtc.remoteStreams.shift(),
                                  t = e.getId();
                              e.stop(), removeView(t);
                          }
                          (rtc.localStream = null), (rtc.remoteStreams = []), (rtc.client = null), (rtc.published = !1), (rtc.joined = !1), n({ call_disconnect: !0 });
                      },
                      function (e) {
                          n({ peer_leave_failed: !0, error: !0, result: e });
                      }
                  )
                : n({ peer_leave_failed: !0 });
        },
        unPublishStream: function (t) {
            var n;
            t.client
                ? t.published
                    ? ((n = t.published),
                      t.client.unpublish(t.localStream, function (e) {
                          (t.published = n), console.log("unpublish failed"), console.error(e);
                      }),
                      (t.published = !1))
                    : console.error("Your didn't publish")
                : console.error("Please Join Room First");
        },
    },
    __Messenger = {
        sendMessageUrl: null,
        loadUploaderInstance: function () {
            var n = null,
                t = Math.random().toString(36).substr(2, 9);
            _.isEmpty(n) &&
                (n = FilePond.create({
                    name: "filepond",
                    labelIdle: "<i class='fas fa-paperclip'></i>",
                    allowDrop: !1,
                    allowImagePreview: !1,
                    allowRevert: !1,
                    server: {
                        process: {
                            url: __Messenger.sendMessageUrl,
                            method: "POST",
                            headers: { "X-CSRF-TOKEN": appConfig.csrf_token },
                            withCredentials: !1,
                            onload: function (e) {
                                var t = JSON.parse(e),
                                    n = t.data,
                                    e = n.storedData;
                                1 == t.reaction ? __Messenger.replaceMessage(e.type, e.message, e.unique_id, e.created_on) : (__Messenger.removeMessage(e.type, e.unique_id), showErrorMessage(n.message));
                            },
                            ondata: function (e) {
                                return e.append("type", 2), e.append("unique_id", t), e;
                            },
                        },
                    },
                    onaddfilestart: function () {
                        __Messenger.appendMessage(2, "", t), $("#lwMessengerFileUpload").hide(), $("#lwUploadingLoader").show();
                    },
                    onprocessfile: function (e, t) {
                        n.removeFile(t.id), $("#lwMessengerFileUpload").show(), $("#lwUploadingLoader").hide();
                    },
                })).appendTo(document.getElementById("lwMessengerFileUpload"));
        },
        $emojiElement: null,
        loadEmojiContent: function () {
            __Messenger.$emojiElement = $("#lwChatMessage").emojioneArea({
                placeholder: __Utils.getTranslation("chat_placeholder", "type message..."),
                hidePickerOnBlur: !0,
                events: {
                    keyup: function (e, t) {
                        13 == t.which && (__Messenger.sendMessage(1, { message: this.getText(), type: 1 }), this.hidePicker());
                    },
                },
            });
        },
        openStickerBottomSheet: function () {
            $(".lw-messenger").on("click", ".lw-open-stickers-action, .lw-open .lw-overlay", function () {
                $(".lw-messenger-bottom-sheet").toggleClass("lw-open"), __Messenger.getStickers();
            });
        },
        getStickers: function () {
            var e = $(".lw-heading"),
                t = $("#lwStickerImagesContainer");
            e.html(""), t.html(""), $("#lwGifImagesContainer").html(""), e.append('<h5><i class="fas fa-sticky-note text-success"></i> ' + __Utils.getTranslation("sticker_name_label", "Stickers") + "</h5>");
        },
        fetchStickers: function (e) {
            e = e.data.stickers;
            _.isEmpty(e)
                ? $("#lwStickerImagesContainer").append("<?= __tr('No result found.') ?>")
                : _.forEach(e, function (e) {
                      (stickerImageTag =
                          "<span class='lw-buy-sticker-container'><img height='100px' width='110px' src='" +
                          e.image_url +
                          "' id='" +
                          e.id +
                          "' class='lw-sticker-image' data-is-free='" +
                          e.is_free +
                          "' data-is-purchased='" +
                          e.is_purchased +
                          "'>"),
                          e.is_free
                              ? (stickerImageTag += "<span class='text-center'>Free</span>")
                              : e.is_purchased
                              ? e.is_purchased && (stickerImageTag += "<span class='text-center'>Purchased</span>")
                              : (stickerImageTag +=
                                    "<div id='lwBuyNowStickerBtn-" +
                                    e.id +
                                    "' class='text-center'><span>" +
                                    e.formatted_price +
                                    "</span><br><button type='button' class='btn btn-secondary btn-sm' onclick='__Messenger.buySticker(" +
                                    e.id +
                                    ")'>Buy Now</button></span></div>"),
                          $("#lwStickerImagesContainer").append(stickerImageTag);
                  }),
                $(".lw-sticker-image").on("click", function () {
                    $(this).data("is-free") || $(this).data("is-purchased")
                        ? (__Messenger.sendMessage(12, { message: this.currentSrc, type: 12, item_id: this.id }), $(".lw-messenger-bottom-sheet").toggleClass("lw-open"))
                        : __Messenger.buySticker(this.id);
                });
        },
        buySticker: function (t) {
            showConfirmation(
                $("#lwBuyStickerText").data("message"),
                function () {
                    __DataRequest.post(__Messenger.buyStickerUrl, { sticker_id: t }, function (e) {
                        1 == e.reaction && ($("#lwTotalCreditWalletAmt").html(e.data.availableCredits), $("#lwBuyNowStickerBtn-" + t).replaceWith("<span class='text-center'>Purchased</span>"));
                    });
                },
                { id: "lwBuyStickerAlert" }
            );
        },
        openGifBottomSheet: function () {
            $(".lw-messenger").on("click", ".lw-open-gif-action, .lw-open .lw-overlay", function () {
                $(".lw-messenger-bottom-sheet").toggleClass("lw-open"), __Messenger.getGifImagesContent();
            });
        },
        getGifImagesContent: function () {
            var e = $(".lw-heading");
            e.html(""),
                e.append(
                    '<h5><i class="fa fa-images text-success"></i> Send Gif</h5><div class="input-group lw-gif-search-input"><input type="text" class="form-control" name="search" id="lwSearchInput" value="" placeholder="Search GIF"><div class="input-group-append"><button type="button" class="btn btn-secondary" onclick="__Messenger.searchGifImages()"><i class="fas fa-search"></i></button></div></div>'
                ),
                __Messenger.fetchGifImages();
        },
        searchGifImages: function () {
            var e = $("#lwSearchInput").val();
            __Messenger.fetchGifImages({ searchValue: e });
        },
        fetchGifImages: function (e) {
            $("#lwStickerImagesContainer").html(""), ($lwGifImagesContainer = $("#lwGifImagesContainer")), $lwGifImagesContainer.html('<div class="lw-messenger-image-loading"></div>');
            var t = "";
            (params = { limit: 50, api_key: __Messenger.giphyKey, fmt: "json" }),
                _.isUndefined(e) ? (t = "https://api.giphy.com/v1/gifs/trending?") : ((t = "https://api.giphy.com/v1/gifs/search?"), (params.q = e.searchValue)),
                __DataRequest.get(
                    t + $.param(params),
                    {},
                    function (e) {
                        e = e.data;
                        $lwGifImagesContainer.html(""),
                            _.isEmpty(e)
                                ? $lwGifImagesContainer.append(__Utils.getTranslation("gif_no_result", "Result Not Found"))
                                : _.forEach(e, function (e) {
                                      (imageTag = $("<img>")), imageTag.attr({ height: "100px", width: "100px", src: e.images.preview_gif.url, class: "lw-gif-image lw-lazy-img" }), $lwGifImagesContainer.append(imageTag);
                                  }),
                            $(".lw-gif-image").on("click", function () {
                                $("<img>").attr({ height: "100px", width: "100px", src: this.currentSrc }), __Messenger.sendMessage(12, { message: this.currentSrc, type: 8 }), $(".lw-messenger-bottom-sheet").toggleClass("lw-open");
                            });
                    },
                    { csrf: !1 }
                );
        },
        acceptMessageRequest: function () {
            $("#lwSendMessageForm").show(), $("#lwAcceptChatRequestBtn").hide(), $("#lwDeclineChatRequestBtn").hide(), __Messenger.hideShowDropdownButtons(!0);
        },
        declineMessageRequest: function () {
            $("#lwDeclineChatRequestBtn").hide(), __Messenger.hideShowDropdownButtons(!1);
        },
        createSendButtonInstance: function () {
            $("#lwSendMessageButton").on("click", function () {
                __Messenger.sendMessageViaForm();
            });
        },
        sendMessageViaForm: function () {
            var n = "",
                e = $("#lwSendMessageForm").serializeArray();
            _.forEach(e, function (e, t) {
                "message" == e.name && (n = e.value);
            }),
                __Messenger.sendMessage(1, { message: n, type: 1 });
        },
        sendMessage: function (e, t) {
            var n = Math.random().toString(36).substr(2, 9),
                r = t.message;
            _.isEmpty(r) ? (showErrorMessage(__Utils.getTranslation("message_is_required", "Message is required")), __Utils.throwError("Message is required")) : __Messenger.appendMessage(e, r, n),
                (t.unique_id = n),
                __DataRequest.post(__Messenger.sendMessageUrl, t, function (e) {
                    var t = e.data.storedData;
                    1 == e.reaction ? __Messenger.replaceMessage(t.type, t.message, t.unique_id, t.created_on) : __Messenger.removeMessage(t.type, t.unique_id);
                });
        },
        appendMessage: function (e, t, n) {
            var r = $(".lw-messenger-chat-window"),
                i = "",
                i =
                    1 == e
                        ? '<div class="lw-messenger-chat-message lw-messenger-chat-sender row col-md-12" id="' +
                          n +
                          '"><p class="lw-messenger-chat-item">' +
                          t +
                          '<span class="lw-messenger-chat-meta">Now</span></p><img src="' +
                          __Messenger.loggedInUserProfilePicture +
                          '" class="lw-profile-picture lw-online" alt=""></div>'
                        : '<div class="lw-messenger-chat-message lw-messenger-chat-sender row col-md-12" id="' +
                          n +
                          '"><p class="lw-messenger-chat-item"><p class="lw-messenger-chat-item col-md-8"><span class="lw-messenger-image-loading"> loading ...please wait</span><span class="lw-messenger-chat-meta">10 February 2020 at 4:00 pm</span></p><span class="lw-messenger-chat-meta">Now</span></p><img src="' +
                          __Messenger.loggedInUserProfilePicture +
                          '" class="lw-profile-picture lw-online" alt=""></div>';
            r.append(i), __Messenger.$emojiElement[0].emojioneArea.setText(""), $(".lw-messenger-chat-window").scrollTop(1e6);
        },
        replaceMessage: function (e, t, n, r) {
            1 != e &&
                ((r =
                    '<div class="lw-messenger-chat-message lw-messenger-chat-sender row col-md-12"><p class="lw-messenger-chat-item"><img src="' +
                    t +
                    '" alt=""><span class="lw-messenger-chat-meta">' +
                    r +
                    '</span></p><img src="' +
                    __Messenger.loggedInUserProfilePicture +
                    '" class="lw-profile-picture lw-online" alt=""></div>'),
                $("#" + n).replaceWith(r));
        },
        removeMessage: function (e, t) {
            1 != e && $("#" + t).remove();
        },
        appendReceivedMessage: function (e, t, n) {
            var r = $(".lw-messenger-chat-window"),
                i = "",
                i =
                    1 == e
                        ? '<div class="lw-messenger-chat-message align-self-center row col-md-12 lw-messenger-chat-recipient"><img src="' +
                          __Messenger.recipientUserProfilePicture +
                          '" class="lw-profile-picture lw-online" alt=""><p class="lw-messenger-chat-item col-md-8">' +
                          t +
                          '<span class="lw-messenger-chat-meta">' +
                          n +
                          "</span></p></div>"
                        : '<div class="lw-messenger-chat-message align-self-center row col-md-12 lw-messenger-chat-recipient"><img src="' +
                          __Messenger.recipientUserProfilePicture +
                          '" class= "lw-profile-picture lw-online" alt=""><p class="lw-messenger-chat-item col-md-8"><img src="' +
                          t +
                          '" alt=""><span class="lw-messenger-chat-meta">' +
                          n +
                          "</span></p></div>";
            r.append(i), $(".lw-messenger-chat-window").scrollTop(1e6);
        },
        toggleSidebarOnMobileView: function () {
            $(".lw-messenger").hasClass("lw-messenger-sidebar-opened") ? $(".lw-messenger").removeClass("lw-messenger-sidebar-opened") : $(".lw-messenger").addClass("lw-messenger-sidebar-opened");
        },
        hideShowChatSidebar: function () {
            $("#lwChatSidebarToggle").on("click", function () {
                __Messenger.toggleSidebarOnMobileView();
            });
        },
        hideShowDropdownButtons: function (e) {
            e
                ? ($("#lwDeleteAllChatActiveButton").show(), $("#lwDeleteAllChatDisableButton").hide(), $("#lwAudioCallBtn").show(), $("#lwAudioCallDisableBtn").hide(), $("#lwVideoCallBtn").show(), $("#lwVideoCallDisableBtn").hide())
                : ($("#lwDeleteAllChatActiveButton").hide(), $("#lwDeleteAllChatDisableButton").show(), $("#lwAudioCallBtn").hide(), $("#lwAudioCallDisableBtn").show(), $("#lwVideoCallBtn").hide(), $("#lwVideoCallDisableBtn").show());
        },
        showMessageRequestNotification: function () {
            $(".lw-messenger #lwAudioCallDisableBtn, .lw-messenger #lwVideoCallDisableBtn").on("click", function () {
                $(".lw-messenger #lwUserNotAcceptedMsgRequest").modal({ keyboard: !1 });
            }),
                $(".lw-messenger .lw-not-accepted-dialog-close-btn, .lw-messenger .lw-not-accepted-dialog-close-btn").on("click", function () {
                    $(".lw-messenger #lwUserNotAcceptedMsgRequest").modal("hide");
                });
        },
    };
function handleMessageActionContainer(e, t) {
    "MESSAGE_REQUEST_ACCEPTED" == e || "SEND_NEW_MESSAGE" == e
        ? (t && __Messenger.loadUploaderInstance(), __Messenger.hideShowDropdownButtons(!0), $("#lwSendMessageForm").show(), $("#lwDeclineMessage").hide())
        : "MESSAGE_REQUEST_RECEIVED" == e
        ? ($("#lwSendMessageForm").hide(), $("#lwAcceptChatRequestBtn").show(), $("#lwDeclineChatRequestBtn").show(), __Messenger.hideShowDropdownButtons(!1), t && __Messenger.loadUploaderInstance())
        : "MESSAGE_REQUEST_DECLINE" == e
        ? (__Messenger.hideShowDropdownButtons(!1), $("#lwAcceptChatRequestBtn").show())
        : "MESSAGE_REQUEST_DECLINE_BY_USER" == e
        ? ($("#lwSendMessageForm").hide(), $("#lwDeclineMessage").show())
        : "MESSAGE_REQUEST_SENT" == e && (t && __Messenger.loadUploaderInstance(), __Messenger.hideShowDropdownButtons(!1), $("#lwSendMessageForm").show(), $("#lwDeclineMessage").hide());
}
var currentSelectedUserId = null,
    currentSelectedUserUid = null;
function userChatResponse(e) {
    $(".lw-messenger").unbind(),
        $("#lwChatSidebarToggle").unbind(),
        1 == e.reaction &&
            ((currentSelectedUserId = e.data.userData.user_id),
            (currentSelectedUserUid = e.data.userData.user_uid),
            (__Messenger.sendMessageUrl = __Utils.apiURL(__Messenger.sendMessageRawUrl, { userId: currentSelectedUserId })),
            _.defer(function () {
                $(".lw-messenger-chat-window").scrollTop(1e6),
                    handleMessageActionContainer(e.data.userData.messageRequestStatus, !0),
                    __Messenger.hideShowChatSidebar(),
                    __Messenger.loadEmojiContent(),
                    __Messenger.openStickerBottomSheet(),
                    __Messenger.openGifBottomSheet(),
                    __Messenger.createSendButtonInstance(),
                    _.delay(function () {
                        __Messenger.hideShowDropdownButtons(e.data.userData.enableAudioVideoLinks);
                    }, 100),
                    __Messenger.showMessageRequestNotification();
            }));
}
!(function (n) {
    "use strict";
    (__globals.translate_strings.uploader_default_text = "<span class='filepond--label-action'><?= __tr('Drag & Drop Files or Browse') ?></span>"),
        n("#sidebarToggle, #sidebarToggleTop").on("click tap", function (e) {
            n("body").toggleClass("sidebar-toggled"), n(".sidebar").toggleClass("toggled"), n(".sidebar").hasClass("toggled") && n(".sidebar .collapse").collapse("hide");
        }),
        n(window).resize(function () {
            n(window).width() < 768 && n(".sidebar .collapse").collapse("hide");
        }),
        n(window).width() < 768 && (n("body").toggleClass("sidebar-toggled"), n(".sidebar").toggleClass("toggled")),
        n("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel", function (e) {
            var t;
            768 < n(window).width() && ((t = (t = e.originalEvent).wheelDelta || -t.detail), (this.scrollTop += 30 * (t < 0 ? 1 : -1)), e.preventDefault());
        }),
        n(document).on("scroll", function () {
            100 < n(this).scrollTop() ? n(".scroll-to-top").fadeIn() : n(".scroll-to-top").fadeOut();
        }),
        n(document).on("click", "a.scroll-to-top", function (e) {
            var t = n(this);
            n("html, body")
                .stop()
                .animate({ scrollTop: n(t.attr("href")).offset().top }, 1e3, "easeInOutExpo"),
                e.preventDefault();
        });
})(jQuery),
    $(function () {
        FilePond.registerPlugin(FilePondPluginImagePreview, FilePondPluginFilePoster, FilePondPluginFileValidateType),
            $(".lw-file-uploader").each(function (index, uploader) {
                var actionUrl = $(this).data("action"),
                    responseCallback = eval($(this).data("callback")),
                    defaultImage = $(this).data("default-image-url"),
                    removeMediaAfterUpload = $(this).data("remove-media"),
                    allowReplace = $(this).data("allow-replace"),
                    allowRevert = $(this).data("allow-revert"),
                    removeAllMediaAfterUpload = $(this).data("remove-all-media"),
                    allowedMediaExtension = $(this).data("allowed-media"),
                    filePondAdditionalOptions = {
                        maxParallelUploads: 10,
                        imagePreviewMaxHeight: 175,
                        labelIdle: $(this).data("label-idle") ? $(this).data("label-idle") : __Utils.getTranslation("uploader_default_text"),
                        acceptedFileTypes: allowedMediaExtension,
                        fileValidateTypeDetectType: function (e, n) {
                            return new Promise(function (e, t) {
                                allowedMediaExtension && allowedMediaExtension.indexOf(n) < 0 && t(), e(n);
                            });
                        },
                        allowRevert: allowRevert || !1,
                        allowReplace: allowReplace || !1,
                        credits: !1,
                        server: {
                            process: {
                                url: actionUrl,
                                method: "POST",
                                headers: { "X-CSRF-TOKEN": appConfig.csrf_token },
                                withCredentials: !1,
                                onload: function (e) {
                                    var t = JSON.parse(e);
                                    switch (t.reaction) {
                                        case 1:
                                            $(".lw-uploaded-file").val(t.data.fileName), showSuccessMessage(t.data.message);
                                            break;
                                        case 14:
                                            showWarnMessage(t.data.message);
                                            break;
                                        default:
                                            showErrorMessage(t.data.message);
                                    }
                                    "function" == typeof responseCallback && responseCallback(t);
                                },
                            },
                        },
                        onprocessfile: function (e, t) {
                            removeMediaAfterUpload && pond.removeFile(t.id), removeAllMediaAfterUpload && pond.removeFiles();
                        },
                    };
                void 0 === defaultImage ||
                    _.isEmpty(defaultImage) ||
                    (filePondAdditionalOptions = $.extend({}, filePondAdditionalOptions, { files: [{ options: { type: "local", file: { name: "", size: uploader.size, type: "image/jpg" }, metadata: { poster: defaultImage } } }] }));
                var pond = FilePond.create(this, filePondAdditionalOptions);
            });
    });
var photoSwipeGallery = function (e, t) {
    t = {
        index: (t = parseInt(t)),
        history: !1,
        focus: !1,
        closeEl: !0,
        captionEl: !0,
        fullscreenEl: !0,
        zoomEl: !0,
        shareEl: !1,
        counterEl: !0,
        arrowEl: !0,
        preloaderEl: !0,
        tapToToggleControls: !1,
        showAnimationDuration: 0,
        hideAnimationDuration: 0,
    };
    new PhotoSwipe(document.querySelectorAll(".pswp")[0], PhotoSwipeUI_Default, e, t).init();
};
$(function () {
    $(".lw-datatable-photoswipe-gallery").on("click", function (e) {
        $(e.target).hasClass("lw-photoswipe-gallery-img") && ((e = [{ src: $(e.target).attr("src"), w: 900, h: 900 }]), photoSwipeGallery(e, 0));
    }),
        $(".lw-photoswipe-gallery-img").on("click", function (e) {
            var t,
                n = $(this).siblings(".lw-photoswipe-gallery-img").addBack(),
                r = 0;
            0 < n.length
                ? ((t = n.map(function (e, t) {
                      return { src: $(t).attr("src"), w: 900, h: 900 };
                  })),
                  $(e.target).data("img-index") && (r = $(e.target).data("img-index")),
                  0 < t.length && photoSwipeGallery(t, r))
                : 0 < (t = [{ src: $(e.target).attr("src"), w: 900, h: 900 }]).length && photoSwipeGallery(t, r);
        });
});
var applyLazyImages = function () {
    $(".lw-lazy-img").Lazy({
        beforeLoad: function (e) {},
        afterLoad: function (e) {
            e.addClass("lw-lazy-img-loaded");
        },
        onError: function (e) {
            e.addClass("lw-lazy-img-error"), console.log("error loading " + e.data("src"));
        },
    });
};
$(function () {
    applyLazyImages();
});
